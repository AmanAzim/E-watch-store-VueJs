{"remainingRequest":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\babel-loader\\lib\\index.js!D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\VueJs-Training\\e-wandy-store-vue-js\\src\\store\\store.js","dependencies":[{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\src\\store\\store.js","mtime":1559940855449},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.find\";\nimport _toConsumableArray from \"D:\\\\VueJs-Training\\\\e-wandy-store-vue-js\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport { storeProducts, detailProduct } from \"../data\";\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    detailedProduct: null,\n    cart: [],\n    modalOpen: false,\n    modalProduct: null,\n    cartSubtotal: 0,\n    cartTax: 0,\n    cartTotal: 0\n  },\n  getters: {\n    products: function products(state) {\n      return state.products;\n    },\n    detailedProduct: function detailedProduct(state) {\n      return state.detailedProduct;\n    },\n    modalProduct: function modalProduct(state) {\n      return state.modalProduct;\n    },\n    cart: function cart(state) {\n      return state.cart;\n    }\n  },\n  mutations: {\n    setProducts: function setProducts(state, products) {\n      state.products = products;\n    },\n    handelDetail: function handelDetail(state, detailedProduct) {\n      state.detailedProduct = detailedProduct;\n    },\n    addToCart: function addToCart(state, payLoad) {\n      state.products = payLoad.tempProducts;\n      state.cart = [].concat(_toConsumableArray(state.cart), [payLoad.product]);\n    },\n    addTotal: function addTotal(state, payLoad) {\n      state.cartSubtotal = payLoad.subTotal;\n      state.cartTax = payLoad.tempTax;\n      state.cartTotal = payLoad.total;\n    },\n    openModal: function openModal(state, modalProduct) {\n      state.modalProduct = modalProduct;\n      state.modalOpen = true;\n    },\n    closeModal: function closeModal(state) {\n      state.modalOpen = false;\n    },\n    increment: function increment(state, cart) {\n      state.cart = cart;\n    },\n    decrement: function decrement(state, cart) {\n      state.cart = cart;\n    },\n    removeItem: function removeItem(state, payLoad) {\n      state.products = payLoad.products;\n      state.cart = payLoad.cart;\n    },\n    clearCart: function clearCart(state, tempProducts) {\n      state.products = tempProducts;\n      state.cartSubtotal = 0;\n      state.cartTax = 0;\n      state.cartTotal = 0;\n      state.cart = [];\n    }\n  },\n  actions: {\n    setProducts: function setProducts(_ref) {\n      var commit = _ref.commit;\n      var tempProducts = [];\n      /*\n        storeProducts.forEach(item=>{\n        const tempItem={...item};\n        tempProducts=[...tempProducts, tempItem];\n        });\n      */\n      //commit('setProducts', tempProducts);\n\n      var Http = new Vue();\n      axios.get('https://e-handy-store.firebaseio.com/storeProducts.json').then(function (res) {\n        tempProducts = res.data;\n        console.log('serveradata', tempProducts);\n        commit('setProducts', tempProducts);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    handelDetail: function handelDetail(_ref2, id) {\n      var commit = _ref2.commit,\n          state = _ref2.state;\n      var product = state.products.find(function (product) {\n        return product.id === id;\n      });\n      commit('handelDetail', product);\n    },\n    addToCart: function addToCart(_ref3, id) {\n      var commit = _ref3.commit,\n          dispatch = _ref3.dispatch,\n          state = _ref3.state;\n\n      var tempProducts = _toConsumableArray(state.products);\n\n      var index = tempProducts.findIndex(function (product) {\n        return product.id === id;\n      });\n      var product = tempProducts[index];\n      product.inCart = true;\n      product.count = 1;\n      product.total = product.price; //1st way of making Promise\n\n      var p = new Promise(function (resolve) {\n        resolve(commit('addToCart', {\n          tempProducts: tempProducts,\n          product: product\n        }));\n      });\n      p.then(function () {\n        dispatch('addTotal');\n      });\n    },\n    addTotal: function addTotal(_ref4) {\n      var commit = _ref4.commit,\n          state = _ref4.state;\n      var subTotal = 0;\n\n      for (var i = 0; i < state.cart.length; i++) {\n        subTotal += state.cart[i].total;\n      }\n\n      var tempTax = subTotal * 0.1;\n      tempTax = parseFloat(tempTax.toFixed(2));\n      var total = subTotal + tempTax;\n      commit('addTotal', {\n        subTotal: subTotal,\n        tempTax: tempTax,\n        total: total\n      });\n    },\n    openModal: function openModal(_ref5, id) {\n      var commit = _ref5.commit,\n          state = _ref5.state;\n      var modalProduct = state.products.find(function (product) {\n        return product.id === id;\n      });\n      commit('openModal', modalProduct);\n    },\n    closeModal: function closeModal(_ref6) {\n      var commit = _ref6.commit;\n      commit('closeModal');\n    },\n    increment: function increment(_ref7, id) {\n      var commit = _ref7.commit,\n          dispatch = _ref7.dispatch,\n          state = _ref7.state;\n\n      var tempCart = _toConsumableArray(state.cart);\n\n      var index = tempCart.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempCart[index];\n      product.count++;\n      product.total += product.price;\n      return new Promise(function (resolve) {\n        resolve(commit('increment', tempCart));\n      }).then(function () {\n        dispatch('addTotal');\n      });\n    },\n    decrement: function decrement(_ref8, id) {\n      var commit = _ref8.commit,\n          dispatch = _ref8.dispatch,\n          state = _ref8.state;\n\n      var tempCart = _toConsumableArray(state.cart);\n\n      var index = tempCart.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempCart[index];\n      product.count--;\n      product.total -= product.price;\n\n      if (product.count <= 0) {\n        dispatch('removeItem', id);\n      } else {\n        return new Promise(function (resolve) {\n          resolve(commit('decrement', tempCart));\n        }).then(function () {\n          dispatch('addTotal');\n        });\n      }\n    },\n    removeItem: function removeItem(_ref9, id) {\n      var commit = _ref9.commit,\n          dispatch = _ref9.dispatch,\n          state = _ref9.state;\n\n      var tempProducts = _toConsumableArray(state.products);\n\n      var index = tempProducts.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempProducts[index];\n      product.inCart = false;\n      product.count = 0;\n      product.total = 0;\n      var tempCart = state.cart.filter(function (item) {\n        return item.id !== id;\n      });\n      return new Promise(function (resolve) {\n        resolve(commit('removeItem', {\n          products: tempProducts,\n          cart: tempCart\n        }));\n      }).then(function () {\n        dispatch('addTotal');\n      });\n    },\n    clearCart: function clearCart(_ref10) {\n      var commit = _ref10.commit,\n          state = _ref10.state;\n\n      var tempProducts = _toConsumableArray(state.products);\n\n      tempProducts.map(function (item) {\n        item.inCart = false;\n        item.count = 0;\n        item.total = 0;\n      });\n      commit('clearCart', tempProducts);\n    }\n  }\n});",{"version":3,"sources":["D:\\VueJs-Training\\e-wandy-store-vue-js\\src\\store\\store.js"],"names":["Vue","Vuex","storeProducts","detailProduct","axios","use","Store","state","products","detailedProduct","cart","modalOpen","modalProduct","cartSubtotal","cartTax","cartTotal","getters","mutations","setProducts","handelDetail","addToCart","payLoad","tempProducts","product","addTotal","subTotal","tempTax","total","openModal","closeModal","increment","decrement","removeItem","clearCart","actions","commit","Http","get","then","res","data","console","log","catch","err","id","find","dispatch","index","findIndex","inCart","count","price","p","Promise","resolve","i","length","parseFloat","toFixed","tempCart","item","filter","map"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAAQC,aAAR,EAAuBC,aAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAJ,GAAG,CAACK,GAAJ,CAAQJ,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACK,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAC,EADJ;AAELC,IAAAA,eAAe,EAAC,IAFX;AAGLC,IAAAA,IAAI,EAAC,EAHA;AAILC,IAAAA,SAAS,EAAC,KAJL;AAKLC,IAAAA,YAAY,EAAC,IALR;AAMLC,IAAAA,YAAY,EAAC,CANR;AAOLC,IAAAA,OAAO,EAAC,CAPH;AAQLC,IAAAA,SAAS,EAAC;AARL,GADqB;AAW5BC,EAAAA,OAAO,EAAC;AACNR,IAAAA,QAAQ,EAAC,kBAACD,KAAD,EAAS;AAChB,aAAOA,KAAK,CAACC,QAAb;AACD,KAHK;AAINC,IAAAA,eAAe,EAAC,yBAACF,KAAD,EAAS;AACvB,aAAOA,KAAK,CAACE,eAAb;AACD,KANK;AAONG,IAAAA,YAAY,EAAC,sBAACL,KAAD,EAAS;AACpB,aAAOA,KAAK,CAACK,YAAb;AACD,KATK;AAUNF,IAAAA,IAAI,EAAC,cAACH,KAAD,EAAS;AACZ,aAAOA,KAAK,CAACG,IAAb;AACD;AAZK,GAXoB;AAyB5BO,EAAAA,SAAS,EAAE;AACTC,IAAAA,WAAW,EAAC,qBAACX,KAAD,EAAQC,QAAR,EAAmB;AAC7BD,MAAAA,KAAK,CAACC,QAAN,GAAeA,QAAf;AACD,KAHQ;AAITW,IAAAA,YAAY,EAAC,sBAACZ,KAAD,EAAQE,eAAR,EAA0B;AACrCF,MAAAA,KAAK,CAACE,eAAN,GAAsBA,eAAtB;AACD,KANQ;AAOTW,IAAAA,SAAS,EAAC,mBAACb,KAAD,EAAQc,OAAR,EAAkB;AAC1Bd,MAAAA,KAAK,CAACC,QAAN,GAAea,OAAO,CAACC,YAAvB;AACAf,MAAAA,KAAK,CAACG,IAAN,gCAAeH,KAAK,CAACG,IAArB,IAA2BW,OAAO,CAACE,OAAnC;AACD,KAVQ;AAWTC,IAAAA,QAAQ,EAAC,kBAACjB,KAAD,EAAQc,OAAR,EAAkB;AACzBd,MAAAA,KAAK,CAACM,YAAN,GAAmBQ,OAAO,CAACI,QAA3B;AACAlB,MAAAA,KAAK,CAACO,OAAN,GAAcO,OAAO,CAACK,OAAtB;AACAnB,MAAAA,KAAK,CAACQ,SAAN,GAAgBM,OAAO,CAACM,KAAxB;AACD,KAfQ;AAgBTC,IAAAA,SAAS,EAAC,mBAACrB,KAAD,EAAQK,YAAR,EAAuB;AAC/BL,MAAAA,KAAK,CAACK,YAAN,GAAmBA,YAAnB;AACAL,MAAAA,KAAK,CAACI,SAAN,GAAgB,IAAhB;AACD,KAnBQ;AAoBTkB,IAAAA,UAAU,EAAC,oBAACtB,KAAD,EAAS;AAClBA,MAAAA,KAAK,CAACI,SAAN,GAAgB,KAAhB;AACD,KAtBQ;AAuBTmB,IAAAA,SAAS,EAAC,mBAACvB,KAAD,EAAQG,IAAR,EAAe;AACvBH,MAAAA,KAAK,CAACG,IAAN,GAAWA,IAAX;AACD,KAzBQ;AA0BTqB,IAAAA,SAAS,EAAC,mBAACxB,KAAD,EAAQG,IAAR,EAAe;AACvBH,MAAAA,KAAK,CAACG,IAAN,GAAWA,IAAX;AACD,KA5BQ;AA6BTsB,IAAAA,UAAU,EAAC,oBAACzB,KAAD,EAAQc,OAAR,EAAkB;AAC3Bd,MAAAA,KAAK,CAACC,QAAN,GAAea,OAAO,CAACb,QAAvB;AACAD,MAAAA,KAAK,CAACG,IAAN,GAAWW,OAAO,CAACX,IAAnB;AACD,KAhCQ;AAiCTuB,IAAAA,SAAS,EAAC,mBAAC1B,KAAD,EAAQe,YAAR,EAAuB;AAC7Bf,MAAAA,KAAK,CAACC,QAAN,GAAec,YAAf;AACAf,MAAAA,KAAK,CAACM,YAAN,GAAmB,CAAnB;AACAN,MAAAA,KAAK,CAACO,OAAN,GAAc,CAAd;AACAP,MAAAA,KAAK,CAACQ,SAAN,GAAgB,CAAhB;AACAR,MAAAA,KAAK,CAACG,IAAN,GAAW,EAAX;AACH;AAvCQ,GAzBiB;AAkE5BwB,EAAAA,OAAO,EAAE;AACPhB,IAAAA,WAAW,EAAC,2BAAY;AAAA,UAAViB,MAAU,QAAVA,MAAU;AACtB,UAAIb,YAAY,GAAC,EAAjB;AACA;;;;;;AAMA;;AACA,UAAMc,IAAI,GAAG,IAAIpC,GAAJ,EAAb;AACAI,MAAAA,KAAK,CAACiC,GAAN,CAAU,yDAAV,EACGC,IADH,CACQ,UAAAC,GAAG,EAAE;AACTjB,QAAAA,YAAY,GAACiB,GAAG,CAACC,IAAjB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BpB,YAA1B;AACAa,QAAAA,MAAM,CAAC,aAAD,EAAgBb,YAAhB,CAAN;AACD,OALH,EAKKqB,KALL,CAKW,UAAAC,GAAG;AAAA,eAAEH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAF;AAAA,OALd;AAMD,KAjBM;AAkBPzB,IAAAA,YAAY,EAAC,6BAAkB0B,EAAlB,EAAuB;AAAA,UAArBV,MAAqB,SAArBA,MAAqB;AAAA,UAAb5B,KAAa,SAAbA,KAAa;AAClC,UAAMgB,OAAO,GAAChB,KAAK,CAACC,QAAN,CAAesC,IAAf,CAAoB,UAAAvB,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAA3B,CAAd;AAEAV,MAAAA,MAAM,CAAC,cAAD,EAAiBZ,OAAjB,CAAN;AACD,KAtBM;AAuBPH,IAAAA,SAAS,EAAC,0BAA4ByB,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,SAA/BA,MAA+B;AAAA,UAAvBY,QAAuB,SAAvBA,QAAuB;AAAA,UAAbxC,KAAa,SAAbA,KAAa;;AACzC,UAAIe,YAAY,sBAAKf,KAAK,CAACC,QAAX,CAAhB;;AACA,UAAIwC,KAAK,GAAC1B,YAAY,CAAC2B,SAAb,CAAuB,UAAA1B,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAA9B,CAAV;AACA,UAAItB,OAAO,GAACD,YAAY,CAAC0B,KAAD,CAAxB;AAEAzB,MAAAA,OAAO,CAAC2B,MAAR,GAAe,IAAf;AACA3B,MAAAA,OAAO,CAAC4B,KAAR,GAAc,CAAd;AACA5B,MAAAA,OAAO,CAACI,KAAR,GAAcJ,OAAO,CAAC6B,KAAtB,CAPyC,CASzC;;AACA,UAAIC,CAAC,GAAC,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAW;AACzBA,QAAAA,OAAO,CAAEpB,MAAM,CAAC,WAAD,EAAc;AAACb,UAAAA,YAAY,EAACA,YAAd;AAA4BC,UAAAA,OAAO,EAACA;AAApC,SAAd,CAAR,CAAP;AACH,OAFK,CAAN;AAGE8B,MAAAA,CAAC,CAACf,IAAF,CAAO,YAAI;AACTS,QAAAA,QAAQ,CAAC,UAAD,CAAR;AACH,OAFC;AAGH,KAvCM;AAwCPvB,IAAAA,QAAQ,EAAC,yBAAmB;AAAA,UAAjBW,MAAiB,SAAjBA,MAAiB;AAAA,UAAT5B,KAAS,SAATA,KAAS;AAC1B,UAAIkB,QAAQ,GAAC,CAAb;;AACA,WAAI,IAAI+B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACjD,KAAK,CAACG,IAAN,CAAW+C,MAAzB,EAAgCD,CAAC,EAAjC,EAAoC;AAClC/B,QAAAA,QAAQ,IAAGlB,KAAK,CAACG,IAAN,CAAW8C,CAAX,EAAc7B,KAAzB;AACD;;AAED,UAAID,OAAO,GAACD,QAAQ,GAAC,GAArB;AACAC,MAAAA,OAAO,GAACgC,UAAU,CAAChC,OAAO,CAACiC,OAAR,CAAgB,CAAhB,CAAD,CAAlB;AAEA,UAAIhC,KAAK,GAACF,QAAQ,GAACC,OAAnB;AAEAS,MAAAA,MAAM,CAAC,UAAD,EAAa;AAACV,QAAAA,QAAQ,EAACA,QAAV;AAAoBC,QAAAA,OAAO,EAACA,OAA5B;AAAqCC,QAAAA,KAAK,EAACA;AAA3C,OAAb,CAAN;AACD,KApDM;AAqDPC,IAAAA,SAAS,EAAC,0BAAkBiB,EAAlB,EAAuB;AAAA,UAArBV,MAAqB,SAArBA,MAAqB;AAAA,UAAb5B,KAAa,SAAbA,KAAa;AAC/B,UAAMK,YAAY,GAACL,KAAK,CAACC,QAAN,CAAesC,IAAf,CAAoB,UAAAvB,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAA3B,CAAnB;AACAV,MAAAA,MAAM,CAAC,WAAD,EAAcvB,YAAd,CAAN;AACD,KAxDM;AAyDPiB,IAAAA,UAAU,EAAC,2BAAY;AAAA,UAAVM,MAAU,SAAVA,MAAU;AACrBA,MAAAA,MAAM,CAAC,YAAD,CAAN;AACD,KA3DM;AA4DPL,IAAAA,SAAS,EAAC,0BAA4Be,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,SAA/BA,MAA+B;AAAA,UAAvBY,QAAuB,SAAvBA,QAAuB;AAAA,UAAbxC,KAAa,SAAbA,KAAa;;AACzC,UAAMqD,QAAQ,sBAAKrD,KAAK,CAACG,IAAX,CAAd;;AACA,UAAMsC,KAAK,GAACY,QAAQ,CAACX,SAAT,CAAmB,UAAAY,IAAI;AAAA,eAAEA,IAAI,CAAChB,EAAL,KAAUA,EAAZ;AAAA,OAAvB,CAAZ;AACA,UAAMtB,OAAO,GAACqC,QAAQ,CAACZ,KAAD,CAAtB;AACAzB,MAAAA,OAAO,CAAC4B,KAAR;AACA5B,MAAAA,OAAO,CAACI,KAAR,IAAgBJ,OAAO,CAAC6B,KAAxB;AAEA,aAAO,IAAIE,OAAJ,CAAY,UAAAC,OAAO,EAAE;AAC1BA,QAAAA,OAAO,CAACpB,MAAM,CAAC,WAAD,EAAcyB,QAAd,CAAP,CAAP;AACD,OAFM,EAEJtB,IAFI,CAEC,YAAI;AACVS,QAAAA,QAAQ,CAAC,UAAD,CAAR;AACD,OAJM,CAAP;AAKD,KAxEM;AAyEPhB,IAAAA,SAAS,EAAC,0BAA4Bc,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,SAA/BA,MAA+B;AAAA,UAAvBY,QAAuB,SAAvBA,QAAuB;AAAA,UAAbxC,KAAa,SAAbA,KAAa;;AACzC,UAAMqD,QAAQ,sBAAKrD,KAAK,CAACG,IAAX,CAAd;;AACA,UAAMsC,KAAK,GAACY,QAAQ,CAACX,SAAT,CAAmB,UAAAY,IAAI;AAAA,eAAEA,IAAI,CAAChB,EAAL,KAAUA,EAAZ;AAAA,OAAvB,CAAZ;AACA,UAAMtB,OAAO,GAACqC,QAAQ,CAACZ,KAAD,CAAtB;AACAzB,MAAAA,OAAO,CAAC4B,KAAR;AACA5B,MAAAA,OAAO,CAACI,KAAR,IAAgBJ,OAAO,CAAC6B,KAAxB;;AAEA,UAAG7B,OAAO,CAAC4B,KAAR,IAAe,CAAlB,EAAoB;AAChBJ,QAAAA,QAAQ,CAAC,YAAD,EAAeF,EAAf,CAAR;AACH,OAFD,MAEM;AAEF,eAAO,IAAIS,OAAJ,CAAY,UAAAC,OAAO,EAAE;AAC1BA,UAAAA,OAAO,CAACpB,MAAM,CAAC,WAAD,EAAcyB,QAAd,CAAP,CAAP;AACD,SAFM,EAEJtB,IAFI,CAEC,YAAI;AACPS,UAAAA,QAAQ,CAAC,UAAD,CAAR;AACJ,SAJM,CAAP;AAKH;AACF,KA1FM;AA2FPf,IAAAA,UAAU,EAAC,2BAA4Ba,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,SAA/BA,MAA+B;AAAA,UAAvBY,QAAuB,SAAvBA,QAAuB;AAAA,UAAbxC,KAAa,SAAbA,KAAa;;AAC1C,UAAMe,YAAY,sBAAKf,KAAK,CAACC,QAAX,CAAlB;;AACA,UAAMwC,KAAK,GAAC1B,YAAY,CAAC2B,SAAb,CAAuB,UAAAY,IAAI;AAAA,eAAEA,IAAI,CAAChB,EAAL,KAAUA,EAAZ;AAAA,OAA3B,CAAZ;AACA,UAAMtB,OAAO,GAACD,YAAY,CAAC0B,KAAD,CAA1B;AACAzB,MAAAA,OAAO,CAAC2B,MAAR,GAAe,KAAf;AACA3B,MAAAA,OAAO,CAAC4B,KAAR,GAAc,CAAd;AACA5B,MAAAA,OAAO,CAACI,KAAR,GAAc,CAAd;AAEA,UAAIiC,QAAQ,GAACrD,KAAK,CAACG,IAAN,CAAWoD,MAAX,CAAkB,UAAAD,IAAI;AAAA,eAAEA,IAAI,CAAChB,EAAL,KAAUA,EAAZ;AAAA,OAAtB,CAAb;AAEA,aAAO,IAAIS,OAAJ,CAAY,UAAAC,OAAO,EAAE;AACxBA,QAAAA,OAAO,CAAEpB,MAAM,CAAC,YAAD,EAAe;AAAC3B,UAAAA,QAAQ,EAACc,YAAV;AAAwBZ,UAAAA,IAAI,EAACkD;AAA7B,SAAf,CAAR,CAAP;AACH,OAFM,EAEJtB,IAFI,CAEC,YAAI;AACRS,QAAAA,QAAQ,CAAC,UAAD,CAAR;AACH,OAJM,CAAP;AAKD,KA1GM;AA2GPd,IAAAA,SAAS,EAAC,2BAAmB;AAAA,UAAjBE,MAAiB,UAAjBA,MAAiB;AAAA,UAAT5B,KAAS,UAATA,KAAS;;AAC3B,UAAIe,YAAY,sBAAKf,KAAK,CAACC,QAAX,CAAhB;;AACAc,MAAAA,YAAY,CAACyC,GAAb,CAAiB,UAAAF,IAAI,EAAE;AACrBA,QAAAA,IAAI,CAACX,MAAL,GAAY,KAAZ;AACAW,QAAAA,IAAI,CAACV,KAAL,GAAW,CAAX;AACAU,QAAAA,IAAI,CAAClC,KAAL,GAAW,CAAX;AACD,OAJD;AAMAQ,MAAAA,MAAM,CAAC,WAAD,EAAcb,YAAd,CAAN;AACD;AApHM;AAlEmB,CAAf,CAAf","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport {storeProducts, detailProduct} from '../data';\nimport axios from 'axios';\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    products:[],\n    detailedProduct:null,\n    cart:[],\n    modalOpen:false,\n    modalProduct:null,\n    cartSubtotal:0,\n    cartTax:0,\n    cartTotal:0,\n  },\n  getters:{\n    products:(state)=>{\n      return state.products;\n    },\n    detailedProduct:(state)=>{\n      return state.detailedProduct;\n    },\n    modalProduct:(state)=>{\n      return state.modalProduct;\n    },\n    cart:(state)=>{\n      return state.cart;\n    }\n  },\n  mutations: {\n    setProducts:(state, products)=>{\n      state.products=products;\n    },\n    handelDetail:(state, detailedProduct)=>{\n      state.detailedProduct=detailedProduct;\n    },\n    addToCart:(state, payLoad)=>{\n      state.products=payLoad.tempProducts;\n      state.cart=[...state.cart, payLoad.product];\n    },\n    addTotal:(state, payLoad)=>{\n      state.cartSubtotal=payLoad.subTotal;\n      state.cartTax=payLoad.tempTax;\n      state.cartTotal=payLoad.total;\n    },\n    openModal:(state, modalProduct)=>{\n      state.modalProduct=modalProduct;\n      state.modalOpen=true;\n    },\n    closeModal:(state)=>{\n      state.modalOpen=false;\n    },\n    increment:(state, cart)=>{\n      state.cart=cart;\n    },\n    decrement:(state, cart)=>{\n      state.cart=cart;\n    },\n    removeItem:(state, payLoad)=>{\n      state.products=payLoad.products;\n      state.cart=payLoad.cart;\n    },\n    clearCart:(state, tempProducts)=>{\n        state.products=tempProducts;\n        state.cartSubtotal=0;\n        state.cartTax=0;\n        state.cartTotal=0;\n        state.cart=[];\n    }\n  },\n  actions: {\n    setProducts:({commit})=>{\n      let tempProducts=[];\n      /*\n        storeProducts.forEach(item=>{\n        const tempItem={...item};\n        tempProducts=[...tempProducts, tempItem];\n        });\n      */\n      //commit('setProducts', tempProducts);\n      const Http = new Vue;\n      axios.get('https://e-handy-store.firebaseio.com/storeProducts.json')\n        .then(res=>{\n          tempProducts=res.data;\n          console.log('serveradata',tempProducts);\n          commit('setProducts', tempProducts);\n        }).catch(err=>console.log(err));\n    },\n    handelDetail:({commit, state}, id)=>{\n      const product=state.products.find(product=>product.id===id);\n\n      commit('handelDetail', product);\n    },\n    addToCart:({commit, dispatch, state}, id)=>{\n      let tempProducts=[...state.products];\n      let index=tempProducts.findIndex(product=>product.id===id);\n      let product=tempProducts[index];\n\n      product.inCart=true;\n      product.count=1;\n      product.total=product.price;\n\n      //1st way of making Promise\n      let p=new Promise((resolve)=>{\n          resolve( commit('addToCart', {tempProducts:tempProducts, product:product}) );\n      })\n        p.then(()=>{\n          dispatch('addTotal')\n      })\n    },\n    addTotal:({commit, state})=>{\n      let subTotal=0;\n      for(let i=0;i<state.cart.length;i++){\n        subTotal +=state.cart[i].total;\n      }\n\n      let tempTax=subTotal*0.1;\n      tempTax=parseFloat(tempTax.toFixed(2));\n\n      let total=subTotal+tempTax;\n\n      commit('addTotal', {subTotal:subTotal, tempTax:tempTax, total:total})\n    },\n    openModal:({commit, state}, id)=>{\n      const modalProduct=state.products.find(product=>product.id===id);\n      commit('openModal', modalProduct);\n    },\n    closeModal:({commit})=>{\n      commit('closeModal');\n    },\n    increment:({commit, dispatch, state}, id)=>{\n      const tempCart=[...state.cart];\n      const index=tempCart.findIndex(item=>item.id===id);\n      const product=tempCart[index];\n      product.count++;\n      product.total +=product.price;\n\n      return new Promise(resolve=>{\n        resolve(commit('increment', tempCart));\n      }).then(()=>{\n        dispatch('addTotal');\n      })\n    },\n    decrement:({commit, dispatch, state}, id)=>{\n      const tempCart=[...state.cart];\n      const index=tempCart.findIndex(item=>item.id===id);\n      const product=tempCart[index];\n      product.count--;\n      product.total -=product.price;\n\n      if(product.count<=0){\n          dispatch('removeItem', id);\n      }else {\n\n          return new Promise(resolve=>{\n            resolve(commit('decrement', tempCart));\n          }).then(()=>{\n               dispatch('addTotal');\n          })\n      }\n    },\n    removeItem:({commit, dispatch, state}, id)=>{\n      const tempProducts=[...state.products];\n      const index=tempProducts.findIndex(item=>item.id===id);\n      const product=tempProducts[index];\n      product.inCart=false;\n      product.count=0;\n      product.total=0;\n\n      let tempCart=state.cart.filter(item=>item.id!==id);\n\n      return new Promise(resolve=>{\n          resolve( commit('removeItem', {products:tempProducts, cart:tempCart}) );\n      }).then(()=>{\n          dispatch('addTotal');\n      })\n    },\n    clearCart:({commit, state})=>{\n      let tempProducts=[...state.products];\n      tempProducts.map(item=>{\n        item.inCart=false;\n        item.count=0;\n        item.total=0;\n      });\n\n      commit('clearCart', tempProducts);\n    }\n  }\n})\n"]}]}
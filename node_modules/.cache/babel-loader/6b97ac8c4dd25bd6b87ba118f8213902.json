{"remainingRequest":"D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\thread-loader\\dist\\cjs.js!D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\babel-loader\\lib\\index.js!D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\src\\store\\store.js","dependencies":[{"path":"D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\src\\store\\store.js","mtime":1560189117365},{"path":"D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _objectSpread from \"D:\\\\VueJs-Training\\\\E-Watch-Store-Vue-Js\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.find\";\nimport _toConsumableArray from \"D:\\\\VueJs-Training\\\\E-Watch-Store-Vue-Js\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport { storeProducts, detailProduct } from \"../data\";\nimport axios from 'axios';\nimport router from \"../router\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    detailedProduct: null,\n    cart: [],\n    modalOpen: false,\n    modalProduct: null,\n    cartSubtotal: 0,\n    cartTax: 0,\n    cartTotal: 0\n  },\n  getters: {\n    products: function products(state) {\n      return state.products;\n    },\n    detailedProduct: function detailedProduct(state) {\n      return state.detailedProduct;\n    },\n    modalProduct: function modalProduct(state) {\n      return state.modalProduct;\n    },\n    cart: function cart(state) {\n      return state.cart;\n    }\n  },\n  mutations: {\n    setProducts: function setProducts(state, products) {\n      state.products = products;\n    },\n    handelDetail: function handelDetail(state, detailedProduct) {\n      state.detailedProduct = detailedProduct;\n    },\n    loadCartOnReload: function loadCartOnReload(state, payLoad) {\n      state.products = payLoad.tempProducts;\n      state.cart = payLoad.tempCart;\n      state.cartSubtotal = payLoad.cartSubtotal;\n      state.cartTax = payLoad.cartTax;\n      state.cartTotal = payLoad.cartTotal;\n    },\n    addToCart: function addToCart(state, payLoad) {\n      state.products = payLoad.tempProducts;\n      state.cart = [].concat(_toConsumableArray(state.cart), [payLoad.product]);\n    },\n    addTotal: function addTotal(state, payLoad) {\n      state.cartSubtotal = payLoad.subTotal;\n      state.cartTax = payLoad.tempTax;\n      state.cartTotal = payLoad.total;\n    },\n    openModal: function openModal(state, modalProduct) {\n      state.modalProduct = modalProduct;\n      state.modalOpen = true;\n    },\n    closeModal: function closeModal(state) {\n      state.modalOpen = false;\n    },\n    increment: function increment(state, cart) {\n      state.cart = cart;\n    },\n    decrement: function decrement(state, cart) {\n      state.cart = cart;\n    },\n    removeItem: function removeItem(state, payLoad) {\n      state.products = payLoad.products;\n      state.cart = payLoad.cart;\n    },\n    clearCart: function clearCart(state, tempProducts) {\n      state.products = tempProducts;\n      state.cartSubtotal = 0;\n      state.cartTax = 0;\n      state.cartTotal = 0;\n      state.cart = [];\n    }\n  },\n  actions: {\n    setProducts: function setProducts(_ref) {\n      var commit = _ref.commit,\n          dispatch = _ref.dispatch;\n      var tempProducts = []; // commit('setProducts', tempProducts);\n\n      /*\n        storeProducts.forEach(item=>{\n        const tempItem={...item};\n        tempProducts=[...tempProducts, tempItem];\n        });\n        commit('setProducts', tempProducts);\n      */\n      // axios.put('https://e-handy-store.firebaseio.com/storeWatches.json', storeProducts);\n\n      axios.get('https://e-handy-store.firebaseio.com/storeWatches.json').then(function (res) {\n        tempProducts = res.data;\n        commit('setProducts', tempProducts);\n        console.log('serveradata', tempProducts);\n      }).then(function () {\n        dispatch('loadDetailOnReload');\n        dispatch('loadCartOnReload');\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    handelDetail: function handelDetail(_ref2, id) {\n      var commit = _ref2.commit,\n          state = _ref2.state;\n      var product = state.products.find(function (product) {\n        return product.id === id;\n      });\n      commit('handelDetail', product);\n      var index = state.products.findIndex(function (product) {\n        return product.id === id;\n      });\n      localStorage.setItem('detailProductIndex', index);\n    },\n    loadDetailOnReload: function loadDetailOnReload(_ref3) {\n      var commit = _ref3.commit,\n          dispatch = _ref3.dispatch,\n          state = _ref3.state;\n\n      if (state.detailedProduct !== null) {\n        return;\n      } else {\n        var index = localStorage.getItem('detailProductIndex');\n        commit('handelDetail', state.products[index]);\n      }\n    },\n    loadCartOnReload: function loadCartOnReload(_ref4) {\n      var commit = _ref4.commit,\n          dispatch = _ref4.dispatch,\n          state = _ref4.state;\n      var stringToArr = localStorage.getItem('cart');\n      var tempCart = JSON.parse(stringToArr);\n      var tempProducts = [];\n      state.products.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      }); // Because we need to also change the main products list after reloading the cart from local storage or after reloading even though a item will be in the cart but in the main products list showed it will appear as new means with \"inCart=false\" and \"count=0\"\n\n      for (var i = 0; i < tempProducts.length; i++) {\n        for (var j = 0; j < tempCart.length; j++) {\n          if (tempCart[j].id === tempProducts[i].id) {\n            tempProducts[i] = _objectSpread({}, tempCart[j]);\n            break;\n          }\n        }\n      }\n\n      var cartSubtotal = localStorage.getItem('cartSubtotal');\n      var cartTax = localStorage.getItem('cartTax');\n      var cartTotal = localStorage.getItem('cartTotal');\n      commit('loadCartOnReload', {\n        tempProducts: tempProducts,\n        tempCart: tempCart,\n        cartSubtotal: cartSubtotal,\n        cartTax: cartTax,\n        cartTotal: cartTotal\n      });\n    },\n    addToCart: function addToCart(_ref5, id) {\n      var commit = _ref5.commit,\n          dispatch = _ref5.dispatch,\n          state = _ref5.state;\n\n      var tempProducts = _toConsumableArray(state.products);\n      /*state.products.forEach((item) => { //Don't do Immutably Copy where it is unnecessary because It cause delay on updating\n        const singleItem = { ...item }\n        tempProducts = [...tempProducts, singleItem]\n      })*/\n\n\n      var index = tempProducts.findIndex(function (product) {\n        return product.id === id;\n      });\n      var product = tempProducts[index];\n      product.inCart = true;\n      product.count = 1;\n      product.total = product.price; // 1st way of making Promise\n\n      var p = new Promise(function (resolve) {\n        resolve(commit('addToCart', {\n          tempProducts: tempProducts,\n          product: product\n        }));\n      });\n      p.then(function () {\n        dispatch('addTotal');\n      }).then(function () {\n        dispatch('saveCartOnBrowser');\n      });\n    },\n    addTotal: function addTotal(_ref6) {\n      var commit = _ref6.commit,\n          state = _ref6.state;\n      var subTotal = 0;\n\n      for (var i = 0; i < state.cart.length; i++) {\n        subTotal += state.cart[i].total;\n      }\n\n      var tempTax = subTotal * 0.1;\n      tempTax = parseFloat(tempTax.toFixed(2));\n      var total = subTotal + tempTax;\n      commit('addTotal', {\n        subTotal: subTotal,\n        tempTax: tempTax,\n        total: total\n      });\n    },\n    openModal: function openModal(_ref7, id) {\n      var commit = _ref7.commit,\n          state = _ref7.state;\n      var modalProduct = state.products.find(function (product) {\n        return product.id === id;\n      });\n      commit('openModal', modalProduct);\n    },\n    closeModal: function closeModal(_ref8) {\n      var commit = _ref8.commit;\n      commit('closeModal');\n    },\n    increment: function increment(_ref9, id) {\n      var commit = _ref9.commit,\n          dispatch = _ref9.dispatch,\n          state = _ref9.state;\n\n      var tempCart = _toConsumableArray(state.cart);\n\n      var index = tempCart.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempCart[index];\n      product.count++;\n      product.total += product.price;\n      return new Promise(function (resolve) {\n        resolve(commit('increment', tempCart));\n      }).then(function () {\n        dispatch('addTotal');\n      }).then(function () {\n        dispatch('saveCartOnBrowser');\n      });\n    },\n    decrement: function decrement(_ref10, id) {\n      var commit = _ref10.commit,\n          dispatch = _ref10.dispatch,\n          state = _ref10.state;\n\n      var tempCart = _toConsumableArray(state.cart);\n\n      var index = tempCart.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempCart[index];\n      product.count--;\n      product.total -= product.price;\n\n      if (product.count <= 0) {\n        dispatch('removeItem', id);\n      } else {\n        return new Promise(function (resolve) {\n          resolve(commit('decrement', tempCart));\n        }).then(function () {\n          dispatch('addTotal');\n        }).then(function () {\n          dispatch('saveCartOnBrowser');\n        });\n      }\n    },\n    removeItem: function removeItem(_ref11, id) {\n      var commit = _ref11.commit,\n          dispatch = _ref11.dispatch,\n          state = _ref11.state;\n\n      var tempProducts = _toConsumableArray(state.products);\n\n      var index = tempProducts.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempProducts[index];\n      product.inCart = false;\n      product.count = 0;\n      product.total = 0;\n      var tempCart = state.cart.filter(function (item) {\n        return item.id !== id;\n      });\n      return new Promise(function (resolve) {\n        resolve(commit('removeItem', {\n          products: tempProducts,\n          cart: tempCart\n        }));\n      }).then(function () {\n        dispatch('addTotal');\n      }).then(function () {\n        dispatch('saveCartOnBrowser');\n      });\n    },\n    clearCart: function clearCart(_ref12) {\n      var commit = _ref12.commit,\n          dispatch = _ref12.dispatch,\n          state = _ref12.state;\n\n      var tempProducts = _toConsumableArray(state.products);\n\n      tempProducts.map(function (item) {\n        item.inCart = false;\n        item.count = 0;\n        item.total = 0;\n      });\n      dispatch('cleanBrowserStorage');\n      commit('clearCart', tempProducts);\n    },\n    paymentComplete: function paymentComplete(_ref13) {\n      var dispatch = _ref13.dispatch;\n      dispatch('clearCart');\n      localStorage.removeItem('detailProductIndex');\n      router.replace('/');\n    },\n    saveCartOnBrowser: function saveCartOnBrowser(_ref14) {\n      var state = _ref14.state;\n      var StringCart = JSON.stringify(state.cart);\n      localStorage.setItem('cart', StringCart);\n      localStorage.setItem('cartSubtotal', state.cartSubtotal);\n      localStorage.setItem('cartTax', state.cartTax);\n      localStorage.setItem('cartTotal', state.cartTotal);\n    },\n    cleanBrowserStorage: function cleanBrowserStorage() {\n      localStorage.removeItem('cart');\n      localStorage.removeItem('cartSubtotal');\n      localStorage.removeItem('cartTax');\n      localStorage.removeItem('cartTotal');\n      localStorage.removeItem('detailProductIndex');\n    }\n  }\n});",{"version":3,"sources":["D:\\VueJs-Training\\E-Watch-Store-Vue-Js\\src\\store\\store.js"],"names":["Vue","Vuex","storeProducts","detailProduct","axios","router","use","Store","state","products","detailedProduct","cart","modalOpen","modalProduct","cartSubtotal","cartTax","cartTotal","getters","mutations","setProducts","handelDetail","loadCartOnReload","payLoad","tempProducts","tempCart","addToCart","product","addTotal","subTotal","tempTax","total","openModal","closeModal","increment","decrement","removeItem","clearCart","actions","commit","dispatch","get","then","res","data","console","log","catch","err","id","find","index","findIndex","localStorage","setItem","loadDetailOnReload","getItem","stringToArr","JSON","parse","forEach","item","singleItem","i","length","j","inCart","count","price","p","Promise","resolve","parseFloat","toFixed","filter","map","paymentComplete","replace","saveCartOnBrowser","StringCart","stringify","cleanBrowserStorage"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport { storeProducts, detailProduct } from '../data'\nimport axios from 'axios'\nimport router from '../router'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    detailedProduct: null,\n    cart: [],\n    modalOpen: false,\n    modalProduct: null,\n    cartSubtotal: 0,\n    cartTax: 0,\n    cartTotal: 0\n  },\n  getters: {\n    products: (state) => {\n      return state.products\n    },\n    detailedProduct: (state) => {\n      return state.detailedProduct;\n    },\n    modalProduct: (state) => {\n      return state.modalProduct\n    },\n    cart: (state) => {\n      return state.cart\n    }\n  },\n  mutations: {\n    setProducts: (state, products) => {\n      state.products = products\n    },\n    handelDetail: (state, detailedProduct) => {\n      state.detailedProduct = detailedProduct\n    },\n    loadCartOnReload: (state, payLoad) => {\n      state.products = payLoad.tempProducts\n      state.cart = payLoad.tempCart\n      state.cartSubtotal = payLoad.cartSubtotal\n      state.cartTax = payLoad.cartTax\n      state.cartTotal = payLoad.cartTotal\n    },\n    addToCart: (state, payLoad) => {\n      state.products = payLoad.tempProducts\n      state.cart = [...state.cart, payLoad.product]\n    },\n    addTotal: (state, payLoad) => {\n      state.cartSubtotal = payLoad.subTotal\n      state.cartTax = payLoad.tempTax\n      state.cartTotal = payLoad.total\n    },\n    openModal: (state, modalProduct) => {\n      state.modalProduct = modalProduct\n      state.modalOpen = true\n    },\n    closeModal: (state) => {\n      state.modalOpen = false\n    },\n    increment: (state, cart) => {\n      state.cart = cart\n    },\n    decrement: (state, cart) => {\n      state.cart = cart\n    },\n    removeItem: (state, payLoad) => {\n      state.products = payLoad.products\n      state.cart = payLoad.cart\n    },\n    clearCart: (state, tempProducts) => {\n      state.products = tempProducts\n      state.cartSubtotal = 0\n      state.cartTax = 0\n      state.cartTotal = 0\n      state.cart = []\n    }\n  },\n  actions: {\n    setProducts: ({ commit, dispatch }) => {\n      let tempProducts = []\n      // commit('setProducts', tempProducts);\n      /*\n        storeProducts.forEach(item=>{\n        const tempItem={...item};\n        tempProducts=[...tempProducts, tempItem];\n        });\n        commit('setProducts', tempProducts);\n      */\n      // axios.put('https://e-handy-store.firebaseio.com/storeWatches.json', storeProducts);\n      axios.get('https://e-handy-store.firebaseio.com/storeWatches.json')\n        .then(res => {\n          tempProducts = res.data\n          commit('setProducts', tempProducts)\n          console.log('serveradata', tempProducts)\n        }).then(() => {\n          dispatch('loadDetailOnReload')\n          dispatch('loadCartOnReload')\n        }).catch(err => console.log(err))\n    },\n    handelDetail: ({ commit, state }, id) => {\n      let product = state.products.find(product => product.id === id)\n      commit('handelDetail', product)\n      let index = state.products.findIndex(product => product.id === id)\n      localStorage.setItem('detailProductIndex', index)\n    },\n    loadDetailOnReload: ({ commit, dispatch, state }) => {\n      if (state.detailedProduct !== null) {\n        return;\n      } else {\n        const index = localStorage.getItem('detailProductIndex')\n        commit('handelDetail', state.products[index])\n      }\n    },\n    loadCartOnReload: ({ commit, dispatch, state }) => {\n      let stringToArr = localStorage.getItem('cart')\n      const tempCart = JSON.parse(stringToArr)\n\n      let tempProducts = []\n      state.products.forEach((item) => {\n        const singleItem = { ...item }\n        tempProducts = [...tempProducts, singleItem]\n      })\n      // Because we need to also change the main products list after reloading the cart from local storage or after reloading even though a item will be in the cart but in the main products list showed it will appear as new means with \"inCart=false\" and \"count=0\"\n      for (let i = 0; i < tempProducts.length; i++) {\n        for (let j = 0; j < tempCart.length; j++) {\n          if (tempCart[j].id === tempProducts[i].id) {\n            tempProducts[i] = { ...tempCart[j] }\n            break\n          }\n        }\n      }\n      const cartSubtotal = localStorage.getItem('cartSubtotal')\n      const cartTax = localStorage.getItem('cartTax')\n      const cartTotal = localStorage.getItem('cartTotal')\n\n      commit('loadCartOnReload', { tempProducts, tempCart, cartSubtotal, cartTax, cartTotal })\n    },\n    addToCart: ({ commit, dispatch, state }, id) => {\n      let tempProducts =[...state.products]\n      /*state.products.forEach((item) => { //Don't do Immutably Copy where it is unnecessary because It cause delay on updating\n        const singleItem = { ...item }\n        tempProducts = [...tempProducts, singleItem]\n      })*/\n      let index = tempProducts.findIndex(product => product.id === id)\n      let product = tempProducts[index]\n\n      product.inCart = true\n      product.count = 1\n      product.total = product.price\n      // 1st way of making Promise\n      let p = new Promise((resolve) => {\n        resolve(commit('addToCart', { tempProducts: tempProducts, product: product }))\n      })\n      p.then(() => {\n        dispatch('addTotal')\n      }).then(() => {\n        dispatch('saveCartOnBrowser')\n      })\n    },\n    addTotal: ({ commit, state }) => {\n      let subTotal = 0\n      for (let i = 0; i < state.cart.length; i++) {\n        subTotal += state.cart[i].total\n      }\n\n      let tempTax = subTotal * 0.1\n      tempTax = parseFloat(tempTax.toFixed(2))\n\n      let total = subTotal + tempTax\n\n      commit('addTotal', { subTotal: subTotal, tempTax: tempTax, total: total })\n    },\n    openModal: ({ commit, state }, id) => {\n      const modalProduct = state.products.find(product => product.id === id)\n      commit('openModal', modalProduct)\n    },\n    closeModal: ({ commit }) => {\n      commit('closeModal')\n    },\n    increment: ({ commit, dispatch, state }, id) => {\n      const tempCart = [...state.cart]\n      const index = tempCart.findIndex(item => item.id === id)\n      const product = tempCart[index]\n      product.count++\n      product.total += product.price\n\n      return new Promise(resolve => {\n        resolve(commit('increment', tempCart))\n      }).then(() => {\n        dispatch('addTotal')\n      }).then(() => {\n        dispatch('saveCartOnBrowser')\n      })\n    },\n    decrement: ({ commit, dispatch, state }, id) => {\n      const tempCart = [...state.cart]\n      const index = tempCart.findIndex(item => item.id === id)\n      const product = tempCart[index]\n      product.count--\n      product.total -= product.price\n\n      if (product.count <= 0) {\n        dispatch('removeItem', id)\n      } else {\n        return new Promise(resolve => {\n          resolve(commit('decrement', tempCart))\n        }).then(() => {\n          dispatch('addTotal')\n        }).then(() => {\n          dispatch('saveCartOnBrowser')\n        })\n      }\n    },\n    removeItem: ({ commit, dispatch, state }, id) => {\n      let tempProducts = [...state.products];\n      const index = tempProducts.findIndex(item => item.id === id)\n      const product = tempProducts[index]\n      product.inCart = false\n      product.count = 0\n      product.total = 0\n\n      let tempCart = state.cart.filter(item => item.id !== id)\n\n      return new Promise(resolve => {\n        resolve(commit('removeItem', { products: tempProducts, cart: tempCart }))\n      }).then(() => {\n        dispatch('addTotal')\n      }).then(() => {\n        dispatch('saveCartOnBrowser')\n      })\n    },\n    clearCart: ({ commit, dispatch, state }) => {\n      let tempProducts = [...state.products];\n      tempProducts.map(item => {\n        item.inCart = false\n        item.count = 0\n        item.total = 0\n      })\n      dispatch('cleanBrowserStorage')\n      commit('clearCart', tempProducts)\n    },\n    paymentComplete: ({ dispatch }) => {\n      dispatch('clearCart')\n      localStorage.removeItem('detailProductIndex')\n      router.replace('/')\n    },\n    saveCartOnBrowser: ({ state }) => {\n      const StringCart = JSON.stringify(state.cart)\n      localStorage.setItem('cart', StringCart)\n      localStorage.setItem('cartSubtotal', state.cartSubtotal)\n      localStorage.setItem('cartTax', state.cartTax)\n      localStorage.setItem('cartTotal', state.cartTotal)\n    },\n    cleanBrowserStorage () {\n      localStorage.removeItem('cart')\n      localStorage.removeItem('cartSubtotal')\n      localStorage.removeItem('cartTax')\n      localStorage.removeItem('cartTotal')\n      localStorage.removeItem('detailProductIndex')\n    }\n  }\n})\n"]}]}
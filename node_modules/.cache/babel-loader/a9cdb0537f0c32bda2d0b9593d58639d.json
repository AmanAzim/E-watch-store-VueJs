{"remainingRequest":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\thread-loader\\dist\\cjs.js!D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\babel-loader\\lib\\index.js!D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\VueJs-Training\\e-wandy-store-vue-js\\src\\store\\store.js","dependencies":[{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\src\\store\\store.js","mtime":1560100934576},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\VueJs-Training\\e-wandy-store-vue-js\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _objectSpread from \"D:\\\\VueJs-Training\\\\e-wandy-store-vue-js\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/es6.array.find\";\nimport _toConsumableArray from \"D:\\\\VueJs-Training\\\\e-wandy-store-vue-js\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport { storeProducts, detailProduct } from \"../data\";\nimport axios from 'axios';\nimport router from \"../router\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    products: [],\n    detailedProduct: null,\n    cart: [],\n    modalOpen: false,\n    modalProduct: null,\n    cartSubtotal: 0,\n    cartTax: 0,\n    cartTotal: 0\n  },\n  getters: {\n    products: function products(state) {\n      return state.products;\n    },\n    detailedProduct: function detailedProduct(state) {\n      return state.detailedProduct;\n    },\n    modalProduct: function modalProduct(state) {\n      return state.modalProduct;\n    },\n    cart: function cart(state) {\n      return state.cart;\n    }\n  },\n  mutations: {\n    setProducts: function setProducts(state, products) {\n      state.products = products;\n    },\n    handelDetail: function handelDetail(state, detailedProduct) {\n      state.detailedProduct = detailedProduct;\n    },\n    loadCartOnReload: function loadCartOnReload(state, payLoad) {\n      state.products = payLoad.tempProducts;\n      state.cart = payLoad.tempCart;\n      state.cartSubtotal = payLoad.cartSubtotal;\n      state.cartTax = payLoad.cartTax;\n      state.cartTotal = payLoad.cartTotal;\n    },\n    addToCart: function addToCart(state, payLoad) {\n      state.products = payLoad.tempProducts;\n      state.cart = [].concat(_toConsumableArray(state.cart), [payLoad.product]);\n    },\n    addTotal: function addTotal(state, payLoad) {\n      state.cartSubtotal = payLoad.subTotal;\n      state.cartTax = payLoad.tempTax;\n      state.cartTotal = payLoad.total;\n    },\n    openModal: function openModal(state, modalProduct) {\n      state.modalProduct = modalProduct;\n      state.modalOpen = true;\n    },\n    closeModal: function closeModal(state) {\n      state.modalOpen = false;\n    },\n    increment: function increment(state, cart) {\n      state.cart = cart;\n    },\n    decrement: function decrement(state, cart) {\n      state.cart = cart;\n    },\n    removeItem: function removeItem(state, payLoad) {\n      state.products = payLoad.products;\n      state.cart = payLoad.cart;\n    },\n    clearCart: function clearCart(state, tempProducts) {\n      state.products = tempProducts;\n      state.cartSubtotal = 0;\n      state.cartTax = 0;\n      state.cartTotal = 0;\n      state.cart = [];\n    }\n  },\n  actions: {\n    setProducts: function setProducts(_ref) {\n      var commit = _ref.commit,\n          dispatch = _ref.dispatch;\n      var tempProducts = []; //commit('setProducts', tempProducts);\n\n      /*\n        storeProducts.forEach(item=>{\n        const tempItem={...item};\n        tempProducts=[...tempProducts, tempItem];\n        });\n        commit('setProducts', tempProducts);\n      */\n      //axios.put('https://e-handy-store.firebaseio.com/storeWatches.json', storeProducts);\n\n      axios.get('https://e-handy-store.firebaseio.com/storeWatches.json').then(function (res) {\n        tempProducts = res.data;\n        commit('setProducts', tempProducts);\n        console.log('serveradata', tempProducts);\n      }).then(function () {\n        dispatch('loadDetailOnReload');\n        dispatch('loadCartOnReload');\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    },\n    handelDetail: function handelDetail(_ref2, id) {\n      var commit = _ref2.commit,\n          state = _ref2.state;\n      var product = state.products.find(function (product) {\n        return product.id === id;\n      });\n      commit('handelDetail', product);\n      var index = state.products.findIndex(function (product) {\n        return product.id === id;\n      });\n      localStorage.setItem('detailProductIndex', index);\n    },\n    loadDetailOnReload: function loadDetailOnReload(_ref3) {\n      var commit = _ref3.commit,\n          dispatch = _ref3.dispatch,\n          state = _ref3.state;\n\n      if (state.detailedProduct !== null) {\n        return;\n      } else {\n        var index = localStorage.getItem('detailProductIndex');\n        commit('handelDetail', state.products[index]);\n      }\n    },\n    loadCartOnReload: function loadCartOnReload(_ref4) {\n      var commit = _ref4.commit,\n          dispatch = _ref4.dispatch,\n          state = _ref4.state;\n      var stringToArr = localStorage.getItem('cart');\n      var tempCart = JSON.parse(stringToArr);\n      var tempProducts = [];\n      state.products.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      }); //Because we need to also change the main products list after reloading the cart from local storage or after reloading even though a item will be in the cart but in the main products list showed it will appear as new means with \"inCart=false\" and \"count=0\"\n\n      for (var i = 0; i < tempProducts.length; i++) {\n        for (var j = 0; j < tempCart.length; j++) {\n          if (tempCart[j].id === tempProducts[i].id) {\n            tempProducts[i] = _objectSpread({}, tempCart[j]);\n            break;\n          }\n        }\n      }\n\n      var cartSubtotal = localStorage.getItem('cartSubtotal');\n      var cartTax = localStorage.getItem('cartTax');\n      var cartTotal = localStorage.getItem('cartTotal');\n      commit('loadCartOnReload', {\n        tempProducts: tempProducts,\n        tempCart: tempCart,\n        cartSubtotal: cartSubtotal,\n        cartTax: cartTax,\n        cartTotal: cartTotal\n      });\n    },\n    addToCart: function addToCart(_ref5, id) {\n      var commit = _ref5.commit,\n          dispatch = _ref5.dispatch,\n          state = _ref5.state;\n      var tempProducts = [];\n      state.products.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      });\n      var index = tempProducts.findIndex(function (product) {\n        return product.id === id;\n      });\n      var product = tempProducts[index];\n      product.inCart = true;\n      product.count = 1;\n      product.total = product.price; //1st way of making Promise\n\n      var p = new Promise(function (resolve) {\n        resolve(commit('addToCart', {\n          tempProducts: tempProducts,\n          product: product\n        }));\n      });\n      p.then(function () {\n        dispatch('addTotal');\n      }).then(function () {\n        dispatch('saveCartOnBrowser');\n      });\n    },\n    addTotal: function addTotal(_ref6) {\n      var commit = _ref6.commit,\n          state = _ref6.state;\n      var subTotal = 0;\n\n      for (var i = 0; i < state.cart.length; i++) {\n        subTotal += state.cart[i].total;\n      }\n\n      var tempTax = subTotal * 0.1;\n      tempTax = parseFloat(tempTax.toFixed(2));\n      var total = subTotal + tempTax;\n      commit('addTotal', {\n        subTotal: subTotal,\n        tempTax: tempTax,\n        total: total\n      });\n    },\n    openModal: function openModal(_ref7, id) {\n      var commit = _ref7.commit,\n          state = _ref7.state;\n      var modalProduct = state.products.find(function (product) {\n        return product.id === id;\n      });\n      commit('openModal', modalProduct);\n    },\n    closeModal: function closeModal(_ref8) {\n      var commit = _ref8.commit;\n      commit('closeModal');\n    },\n    increment: function increment(_ref9, id) {\n      var commit = _ref9.commit,\n          dispatch = _ref9.dispatch,\n          state = _ref9.state;\n\n      var tempCart = _toConsumableArray(state.cart);\n\n      var index = tempCart.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempCart[index];\n      product.count++;\n      product.total += product.price;\n      return new Promise(function (resolve) {\n        resolve(commit('increment', tempCart));\n      }).then(function () {\n        dispatch('addTotal');\n      }).then(function () {\n        dispatch('saveCartOnBrowser');\n      });\n    },\n    decrement: function decrement(_ref10, id) {\n      var commit = _ref10.commit,\n          dispatch = _ref10.dispatch,\n          state = _ref10.state;\n\n      var tempCart = _toConsumableArray(state.cart);\n\n      var index = tempCart.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempCart[index];\n      product.count--;\n      product.total -= product.price;\n\n      if (product.count <= 0) {\n        dispatch('removeItem', id);\n      } else {\n        return new Promise(function (resolve) {\n          resolve(commit('decrement', tempCart));\n        }).then(function () {\n          dispatch('addTotal');\n        }).then(function () {\n          dispatch('saveCartOnBrowser');\n        });\n      }\n    },\n    removeItem: function removeItem(_ref11, id) {\n      var commit = _ref11.commit,\n          dispatch = _ref11.dispatch,\n          state = _ref11.state;\n      var tempProducts = [];\n      state.products.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      });\n      var index = tempProducts.findIndex(function (item) {\n        return item.id === id;\n      });\n      var product = tempProducts[index];\n      product.inCart = false;\n      product.count = 0;\n      product.total = 0;\n      var tempCart = state.cart.filter(function (item) {\n        return item.id !== id;\n      });\n      return new Promise(function (resolve) {\n        resolve(commit('removeItem', {\n          products: tempProducts,\n          cart: tempCart\n        }));\n      }).then(function () {\n        dispatch('addTotal');\n      }).then(function () {\n        dispatch('saveCartOnBrowser');\n      });\n    },\n    clearCart: function clearCart(_ref12) {\n      var commit = _ref12.commit,\n          dispatch = _ref12.dispatch,\n          state = _ref12.state;\n      var tempProducts = [];\n      state.products.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      });\n      tempProducts.map(function (item) {\n        item.inCart = false;\n        item.count = 0;\n        item.total = 0;\n      });\n      dispatch('cleanBrowserStorage');\n      commit('clearCart', tempProducts);\n    },\n    paymentComplete: function paymentComplete(_ref13) {\n      var dispatch = _ref13.dispatch;\n      dispatch('clearCart');\n      localStorage.removeItem('detailProductIndex');\n      router.replace('/');\n    },\n    saveCartOnBrowser: function saveCartOnBrowser(_ref14) {\n      var state = _ref14.state;\n      var StringCart = JSON.stringify(state.cart);\n      localStorage.setItem('cart', StringCart);\n      localStorage.setItem('cartSubtotal', state.cartSubtotal);\n      localStorage.setItem('cartTax', state.cartTax);\n      localStorage.setItem('cartTotal', state.cartTotal);\n    },\n    cleanBrowserStorage: function cleanBrowserStorage() {\n      localStorage.removeItem('cart');\n      localStorage.removeItem('cartSubtotal');\n      localStorage.removeItem('cartTax');\n      localStorage.removeItem('cartTotal');\n      localStorage.removeItem('detailProductIndex');\n    }\n  }\n});",{"version":3,"sources":["D:\\VueJs-Training\\e-wandy-store-vue-js\\src\\store\\store.js"],"names":["Vue","Vuex","storeProducts","detailProduct","axios","router","use","Store","state","products","detailedProduct","cart","modalOpen","modalProduct","cartSubtotal","cartTax","cartTotal","getters","mutations","setProducts","handelDetail","loadCartOnReload","payLoad","tempProducts","tempCart","addToCart","product","addTotal","subTotal","tempTax","total","openModal","closeModal","increment","decrement","removeItem","clearCart","actions","commit","dispatch","get","then","res","data","console","log","catch","err","id","find","index","findIndex","localStorage","setItem","loadDetailOnReload","getItem","stringToArr","JSON","parse","forEach","item","singleItem","i","length","j","inCart","count","price","p","Promise","resolve","parseFloat","toFixed","filter","map","paymentComplete","replace","saveCartOnBrowser","StringCart","stringify","cleanBrowserStorage"],"mappings":";;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAAQC,aAAR,EAAuBC,aAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP;AAEAL,GAAG,CAACM,GAAJ,CAAQL,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACM,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAC,EADJ;AAELC,IAAAA,eAAe,EAAC,IAFX;AAGLC,IAAAA,IAAI,EAAC,EAHA;AAILC,IAAAA,SAAS,EAAC,KAJL;AAKLC,IAAAA,YAAY,EAAC,IALR;AAMLC,IAAAA,YAAY,EAAC,CANR;AAOLC,IAAAA,OAAO,EAAC,CAPH;AAQLC,IAAAA,SAAS,EAAC;AARL,GADqB;AAW5BC,EAAAA,OAAO,EAAC;AACNR,IAAAA,QAAQ,EAAC,kBAACD,KAAD,EAAS;AAChB,aAAOA,KAAK,CAACC,QAAb;AACD,KAHK;AAINC,IAAAA,eAAe,EAAC,yBAACF,KAAD,EAAS;AACvB,aAAOA,KAAK,CAACE,eAAb;AACD,KANK;AAONG,IAAAA,YAAY,EAAC,sBAACL,KAAD,EAAS;AACpB,aAAOA,KAAK,CAACK,YAAb;AACD,KATK;AAUNF,IAAAA,IAAI,EAAC,cAACH,KAAD,EAAS;AACZ,aAAOA,KAAK,CAACG,IAAb;AACD;AAZK,GAXoB;AAyB5BO,EAAAA,SAAS,EAAE;AACTC,IAAAA,WAAW,EAAC,qBAACX,KAAD,EAAQC,QAAR,EAAmB;AAC7BD,MAAAA,KAAK,CAACC,QAAN,GAAeA,QAAf;AACD,KAHQ;AAITW,IAAAA,YAAY,EAAC,sBAACZ,KAAD,EAAQE,eAAR,EAA0B;AACrCF,MAAAA,KAAK,CAACE,eAAN,GAAsBA,eAAtB;AACD,KANQ;AAOTW,IAAAA,gBAAgB,EAAC,0BAACb,KAAD,EAAQc,OAAR,EAAkB;AACjCd,MAAAA,KAAK,CAACC,QAAN,GAAea,OAAO,CAACC,YAAvB;AACAf,MAAAA,KAAK,CAACG,IAAN,GAAWW,OAAO,CAACE,QAAnB;AACAhB,MAAAA,KAAK,CAACM,YAAN,GAAmBQ,OAAO,CAACR,YAA3B;AACAN,MAAAA,KAAK,CAACO,OAAN,GAAcO,OAAO,CAACP,OAAtB;AACAP,MAAAA,KAAK,CAACQ,SAAN,GAAgBM,OAAO,CAACN,SAAxB;AACD,KAbQ;AAcTS,IAAAA,SAAS,EAAC,mBAACjB,KAAD,EAAQc,OAAR,EAAkB;AAC1Bd,MAAAA,KAAK,CAACC,QAAN,GAAea,OAAO,CAACC,YAAvB;AACAf,MAAAA,KAAK,CAACG,IAAN,gCAAeH,KAAK,CAACG,IAArB,IAA2BW,OAAO,CAACI,OAAnC;AACD,KAjBQ;AAkBTC,IAAAA,QAAQ,EAAC,kBAACnB,KAAD,EAAQc,OAAR,EAAkB;AACzBd,MAAAA,KAAK,CAACM,YAAN,GAAmBQ,OAAO,CAACM,QAA3B;AACApB,MAAAA,KAAK,CAACO,OAAN,GAAcO,OAAO,CAACO,OAAtB;AACArB,MAAAA,KAAK,CAACQ,SAAN,GAAgBM,OAAO,CAACQ,KAAxB;AACD,KAtBQ;AAuBTC,IAAAA,SAAS,EAAC,mBAACvB,KAAD,EAAQK,YAAR,EAAuB;AAC/BL,MAAAA,KAAK,CAACK,YAAN,GAAmBA,YAAnB;AACAL,MAAAA,KAAK,CAACI,SAAN,GAAgB,IAAhB;AACD,KA1BQ;AA2BToB,IAAAA,UAAU,EAAC,oBAACxB,KAAD,EAAS;AAClBA,MAAAA,KAAK,CAACI,SAAN,GAAgB,KAAhB;AACD,KA7BQ;AA8BTqB,IAAAA,SAAS,EAAC,mBAACzB,KAAD,EAAQG,IAAR,EAAe;AACvBH,MAAAA,KAAK,CAACG,IAAN,GAAWA,IAAX;AACD,KAhCQ;AAiCTuB,IAAAA,SAAS,EAAC,mBAAC1B,KAAD,EAAQG,IAAR,EAAe;AACvBH,MAAAA,KAAK,CAACG,IAAN,GAAWA,IAAX;AACD,KAnCQ;AAoCTwB,IAAAA,UAAU,EAAC,oBAAC3B,KAAD,EAAQc,OAAR,EAAkB;AAC3Bd,MAAAA,KAAK,CAACC,QAAN,GAAea,OAAO,CAACb,QAAvB;AACAD,MAAAA,KAAK,CAACG,IAAN,GAAWW,OAAO,CAACX,IAAnB;AACD,KAvCQ;AAwCTyB,IAAAA,SAAS,EAAC,mBAAC5B,KAAD,EAAQe,YAAR,EAAuB;AAC7Bf,MAAAA,KAAK,CAACC,QAAN,GAAec,YAAf;AACAf,MAAAA,KAAK,CAACM,YAAN,GAAmB,CAAnB;AACAN,MAAAA,KAAK,CAACO,OAAN,GAAc,CAAd;AACAP,MAAAA,KAAK,CAACQ,SAAN,GAAgB,CAAhB;AACAR,MAAAA,KAAK,CAACG,IAAN,GAAW,EAAX;AACH;AA9CQ,GAzBiB;AAyE5B0B,EAAAA,OAAO,EAAE;AACPlB,IAAAA,WAAW,EAAC,2BAAsB;AAAA,UAApBmB,MAAoB,QAApBA,MAAoB;AAAA,UAAZC,QAAY,QAAZA,QAAY;AAChC,UAAIhB,YAAY,GAAC,EAAjB,CADgC,CAEhC;;AACA;;;;;;;AAOA;;AACEnB,MAAAA,KAAK,CAACoC,GAAN,CAAU,wDAAV,EACCC,IADD,CACM,UAAAC,GAAG,EAAE;AACPnB,QAAAA,YAAY,GAACmB,GAAG,CAACC,IAAjB;AACAL,QAAAA,MAAM,CAAC,aAAD,EAAgBf,YAAhB,CAAN;AACAqB,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BtB,YAA1B;AACH,OALD,EAKGkB,IALH,CAKQ,YAAI;AACNF,QAAAA,QAAQ,CAAC,oBAAD,CAAR;AACAA,QAAAA,QAAQ,CAAC,kBAAD,CAAR;AACL,OARD,EAQGO,KARH,CAQS,UAAAC,GAAG;AAAA,eAAEH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAF;AAAA,OARZ;AASH,KArBM;AAsBP3B,IAAAA,YAAY,EAAC,6BAAkB4B,EAAlB,EAAuB;AAAA,UAArBV,MAAqB,SAArBA,MAAqB;AAAA,UAAb9B,KAAa,SAAbA,KAAa;AAClC,UAAIkB,OAAO,GAAClB,KAAK,CAACC,QAAN,CAAewC,IAAf,CAAoB,UAAAvB,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAA3B,CAAZ;AACAV,MAAAA,MAAM,CAAC,cAAD,EAAiBZ,OAAjB,CAAN;AACA,UAAIwB,KAAK,GAAC1C,KAAK,CAACC,QAAN,CAAe0C,SAAf,CAAyB,UAAAzB,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAAhC,CAAV;AACAI,MAAAA,YAAY,CAACC,OAAb,CAAqB,oBAArB,EAA2CH,KAA3C;AACD,KA3BM;AA4BPI,IAAAA,kBAAkB,EAAC,mCAA6B;AAAA,UAA3BhB,MAA2B,SAA3BA,MAA2B;AAAA,UAAnBC,QAAmB,SAAnBA,QAAmB;AAAA,UAAT/B,KAAS,SAATA,KAAS;;AAC9C,UAAGA,KAAK,CAACE,eAAN,KAAwB,IAA3B,EAAgC;AAC9B;AACD,OAFD,MAEM;AACJ,YAAMwC,KAAK,GAACE,YAAY,CAACG,OAAb,CAAqB,oBAArB,CAAZ;AACAjB,QAAAA,MAAM,CAAC,cAAD,EAAiB9B,KAAK,CAACC,QAAN,CAAeyC,KAAf,CAAjB,CAAN;AACD;AACF,KAnCM;AAoCP7B,IAAAA,gBAAgB,EAAC,iCAA6B;AAAA,UAA3BiB,MAA2B,SAA3BA,MAA2B;AAAA,UAAnBC,QAAmB,SAAnBA,QAAmB;AAAA,UAAT/B,KAAS,SAATA,KAAS;AAC5C,UAAIgD,WAAW,GAACJ,YAAY,CAACG,OAAb,CAAqB,MAArB,CAAhB;AACA,UAAM/B,QAAQ,GAACiC,IAAI,CAACC,KAAL,CAAWF,WAAX,CAAf;AAEA,UAAIjC,YAAY,GAAC,EAAjB;AACAf,MAAAA,KAAK,CAACC,QAAN,CAAekD,OAAf,CAAuB,UAACC,IAAD,EAAQ;AAC7B,YAAMC,UAAU,qBAAKD,IAAL,CAAhB;;AACArC,QAAAA,YAAY,gCAAKA,YAAL,IAAmBsC,UAAnB,EAAZ;AACD,OAHD,EAL4C,CAS5C;;AACA,WAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACvC,YAAY,CAACwC,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACtC,aAAI,IAAIE,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACxC,QAAQ,CAACuC,MAAxB,EAA+BC,CAAC,EAAhC,EAAmC;AACjC,cAAGxC,QAAQ,CAACwC,CAAD,CAAR,CAAYhB,EAAZ,KAAiBzB,YAAY,CAACuC,CAAD,CAAZ,CAAgBd,EAApC,EAAuC;AACrCzB,YAAAA,YAAY,CAACuC,CAAD,CAAZ,qBAAoBtC,QAAQ,CAACwC,CAAD,CAA5B;AACA;AACD;AACF;AACF;;AACD,UAAMlD,YAAY,GAACsC,YAAY,CAACG,OAAb,CAAqB,cAArB,CAAnB;AACA,UAAMxC,OAAO,GAACqC,YAAY,CAACG,OAAb,CAAqB,SAArB,CAAd;AACA,UAAMvC,SAAS,GAACoC,YAAY,CAACG,OAAb,CAAqB,WAArB,CAAhB;AAEAjB,MAAAA,MAAM,CAAC,kBAAD,EAAqB;AAACf,QAAAA,YAAY,EAAZA,YAAD;AAAeC,QAAAA,QAAQ,EAARA,QAAf;AAAyBV,QAAAA,YAAY,EAAZA,YAAzB;AAAuCC,QAAAA,OAAO,EAAPA,OAAvC;AAAgDC,QAAAA,SAAS,EAATA;AAAhD,OAArB,CAAN;AACD,KA3DM;AA4DPS,IAAAA,SAAS,EAAC,0BAA4BuB,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,SAA/BA,MAA+B;AAAA,UAAvBC,QAAuB,SAAvBA,QAAuB;AAAA,UAAb/B,KAAa,SAAbA,KAAa;AACzC,UAAIe,YAAY,GAAC,EAAjB;AACAf,MAAAA,KAAK,CAACC,QAAN,CAAekD,OAAf,CAAuB,UAACC,IAAD,EAAQ;AAC7B,YAAMC,UAAU,qBAAKD,IAAL,CAAhB;;AACArC,QAAAA,YAAY,gCAAKA,YAAL,IAAmBsC,UAAnB,EAAZ;AACD,OAHD;AAIA,UAAIX,KAAK,GAAC3B,YAAY,CAAC4B,SAAb,CAAuB,UAAAzB,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAA9B,CAAV;AACA,UAAItB,OAAO,GAACH,YAAY,CAAC2B,KAAD,CAAxB;AAEAxB,MAAAA,OAAO,CAACuC,MAAR,GAAe,IAAf;AACAvC,MAAAA,OAAO,CAACwC,KAAR,GAAc,CAAd;AACAxC,MAAAA,OAAO,CAACI,KAAR,GAAcJ,OAAO,CAACyC,KAAtB,CAXyC,CAazC;;AACA,UAAIC,CAAC,GAAC,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAW;AACzBA,QAAAA,OAAO,CAAEhC,MAAM,CAAC,WAAD,EAAc;AAACf,UAAAA,YAAY,EAACA,YAAd;AAA4BG,UAAAA,OAAO,EAACA;AAApC,SAAd,CAAR,CAAP;AACH,OAFK,CAAN;AAGE0C,MAAAA,CAAC,CAAC3B,IAAF,CAAO,YAAI;AACTF,QAAAA,QAAQ,CAAC,UAAD,CAAR;AACD,OAFD,EAEGE,IAFH,CAEQ,YAAI;AACVF,QAAAA,QAAQ,CAAC,mBAAD,CAAR;AACD,OAJD;AAKH,KAlFM;AAmFPZ,IAAAA,QAAQ,EAAC,yBAAmB;AAAA,UAAjBW,MAAiB,SAAjBA,MAAiB;AAAA,UAAT9B,KAAS,SAATA,KAAS;AAC1B,UAAIoB,QAAQ,GAAC,CAAb;;AACA,WAAI,IAAIkC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACtD,KAAK,CAACG,IAAN,CAAWoD,MAAzB,EAAgCD,CAAC,EAAjC,EAAoC;AAClClC,QAAAA,QAAQ,IAAGpB,KAAK,CAACG,IAAN,CAAWmD,CAAX,EAAchC,KAAzB;AACD;;AAED,UAAID,OAAO,GAACD,QAAQ,GAAC,GAArB;AACAC,MAAAA,OAAO,GAAC0C,UAAU,CAAC1C,OAAO,CAAC2C,OAAR,CAAgB,CAAhB,CAAD,CAAlB;AAEA,UAAI1C,KAAK,GAACF,QAAQ,GAACC,OAAnB;AAEAS,MAAAA,MAAM,CAAC,UAAD,EAAa;AAACV,QAAAA,QAAQ,EAACA,QAAV;AAAoBC,QAAAA,OAAO,EAACA,OAA5B;AAAqCC,QAAAA,KAAK,EAACA;AAA3C,OAAb,CAAN;AACD,KA/FM;AAgGPC,IAAAA,SAAS,EAAC,0BAAkBiB,EAAlB,EAAuB;AAAA,UAArBV,MAAqB,SAArBA,MAAqB;AAAA,UAAb9B,KAAa,SAAbA,KAAa;AAC/B,UAAMK,YAAY,GAACL,KAAK,CAACC,QAAN,CAAewC,IAAf,CAAoB,UAAAvB,OAAO;AAAA,eAAEA,OAAO,CAACsB,EAAR,KAAaA,EAAf;AAAA,OAA3B,CAAnB;AACAV,MAAAA,MAAM,CAAC,WAAD,EAAczB,YAAd,CAAN;AACD,KAnGM;AAoGPmB,IAAAA,UAAU,EAAC,2BAAY;AAAA,UAAVM,MAAU,SAAVA,MAAU;AACrBA,MAAAA,MAAM,CAAC,YAAD,CAAN;AACD,KAtGM;AAuGPL,IAAAA,SAAS,EAAC,0BAA4Be,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,SAA/BA,MAA+B;AAAA,UAAvBC,QAAuB,SAAvBA,QAAuB;AAAA,UAAb/B,KAAa,SAAbA,KAAa;;AACzC,UAAMgB,QAAQ,sBAAKhB,KAAK,CAACG,IAAX,CAAd;;AACA,UAAMuC,KAAK,GAAC1B,QAAQ,CAAC2B,SAAT,CAAmB,UAAAS,IAAI;AAAA,eAAEA,IAAI,CAACZ,EAAL,KAAUA,EAAZ;AAAA,OAAvB,CAAZ;AACA,UAAMtB,OAAO,GAACF,QAAQ,CAAC0B,KAAD,CAAtB;AACAxB,MAAAA,OAAO,CAACwC,KAAR;AACAxC,MAAAA,OAAO,CAACI,KAAR,IAAgBJ,OAAO,CAACyC,KAAxB;AAEA,aAAO,IAAIE,OAAJ,CAAY,UAAAC,OAAO,EAAE;AAC1BA,QAAAA,OAAO,CAAChC,MAAM,CAAC,WAAD,EAAcd,QAAd,CAAP,CAAP;AACD,OAFM,EAEJiB,IAFI,CAEC,YAAI;AACVF,QAAAA,QAAQ,CAAC,UAAD,CAAR;AACD,OAJM,EAIJE,IAJI,CAIC,YAAI;AACVF,QAAAA,QAAQ,CAAC,mBAAD,CAAR;AACD,OANM,CAAP;AAOD,KArHM;AAsHPL,IAAAA,SAAS,EAAC,2BAA4Bc,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,UAA/BA,MAA+B;AAAA,UAAvBC,QAAuB,UAAvBA,QAAuB;AAAA,UAAb/B,KAAa,UAAbA,KAAa;;AACzC,UAAMgB,QAAQ,sBAAKhB,KAAK,CAACG,IAAX,CAAd;;AACA,UAAMuC,KAAK,GAAC1B,QAAQ,CAAC2B,SAAT,CAAmB,UAAAS,IAAI;AAAA,eAAEA,IAAI,CAACZ,EAAL,KAAUA,EAAZ;AAAA,OAAvB,CAAZ;AACA,UAAMtB,OAAO,GAACF,QAAQ,CAAC0B,KAAD,CAAtB;AACAxB,MAAAA,OAAO,CAACwC,KAAR;AACAxC,MAAAA,OAAO,CAACI,KAAR,IAAgBJ,OAAO,CAACyC,KAAxB;;AAEA,UAAGzC,OAAO,CAACwC,KAAR,IAAe,CAAlB,EAAoB;AAChB3B,QAAAA,QAAQ,CAAC,YAAD,EAAeS,EAAf,CAAR;AACH,OAFD,MAEM;AAEF,eAAO,IAAIqB,OAAJ,CAAY,UAAAC,OAAO,EAAE;AAC1BA,UAAAA,OAAO,CAAChC,MAAM,CAAC,WAAD,EAAcd,QAAd,CAAP,CAAP;AACD,SAFM,EAEJiB,IAFI,CAEC,YAAI;AACPF,UAAAA,QAAQ,CAAC,UAAD,CAAR;AACJ,SAJM,EAIJE,IAJI,CAIC,YAAI;AACVF,UAAAA,QAAQ,CAAC,mBAAD,CAAR;AACD,SANM,CAAP;AAOH;AACF,KAzIM;AA0IPJ,IAAAA,UAAU,EAAC,4BAA4Ba,EAA5B,EAAiC;AAAA,UAA/BV,MAA+B,UAA/BA,MAA+B;AAAA,UAAvBC,QAAuB,UAAvBA,QAAuB;AAAA,UAAb/B,KAAa,UAAbA,KAAa;AAC1C,UAAIe,YAAY,GAAC,EAAjB;AACAf,MAAAA,KAAK,CAACC,QAAN,CAAekD,OAAf,CAAuB,UAACC,IAAD,EAAQ;AAC7B,YAAMC,UAAU,qBAAKD,IAAL,CAAhB;;AACArC,QAAAA,YAAY,gCAAKA,YAAL,IAAmBsC,UAAnB,EAAZ;AACD,OAHD;AAIA,UAAMX,KAAK,GAAC3B,YAAY,CAAC4B,SAAb,CAAuB,UAAAS,IAAI;AAAA,eAAEA,IAAI,CAACZ,EAAL,KAAUA,EAAZ;AAAA,OAA3B,CAAZ;AACA,UAAMtB,OAAO,GAACH,YAAY,CAAC2B,KAAD,CAA1B;AACAxB,MAAAA,OAAO,CAACuC,MAAR,GAAe,KAAf;AACAvC,MAAAA,OAAO,CAACwC,KAAR,GAAc,CAAd;AACAxC,MAAAA,OAAO,CAACI,KAAR,GAAc,CAAd;AAEA,UAAIN,QAAQ,GAAChB,KAAK,CAACG,IAAN,CAAW8D,MAAX,CAAkB,UAAAb,IAAI;AAAA,eAAEA,IAAI,CAACZ,EAAL,KAAUA,EAAZ;AAAA,OAAtB,CAAb;AAEA,aAAO,IAAIqB,OAAJ,CAAY,UAAAC,OAAO,EAAE;AACxBA,QAAAA,OAAO,CAAEhC,MAAM,CAAC,YAAD,EAAe;AAAC7B,UAAAA,QAAQ,EAACc,YAAV;AAAwBZ,UAAAA,IAAI,EAACa;AAA7B,SAAf,CAAR,CAAP;AACH,OAFM,EAEJiB,IAFI,CAEC,YAAI;AACRF,QAAAA,QAAQ,CAAC,UAAD,CAAR;AACH,OAJM,EAIJE,IAJI,CAIC,YAAI;AACVF,QAAAA,QAAQ,CAAC,mBAAD,CAAR;AACD,OANM,CAAP;AAOD,KA/JM;AAgKPH,IAAAA,SAAS,EAAC,2BAA6B;AAAA,UAA3BE,MAA2B,UAA3BA,MAA2B;AAAA,UAAnBC,QAAmB,UAAnBA,QAAmB;AAAA,UAAT/B,KAAS,UAATA,KAAS;AACrC,UAAIe,YAAY,GAAC,EAAjB;AACAf,MAAAA,KAAK,CAACC,QAAN,CAAekD,OAAf,CAAuB,UAACC,IAAD,EAAQ;AAC7B,YAAMC,UAAU,qBAAKD,IAAL,CAAhB;;AACArC,QAAAA,YAAY,gCAAKA,YAAL,IAAmBsC,UAAnB,EAAZ;AACD,OAHD;AAIAtC,MAAAA,YAAY,CAACmD,GAAb,CAAiB,UAAAd,IAAI,EAAE;AACrBA,QAAAA,IAAI,CAACK,MAAL,GAAY,KAAZ;AACAL,QAAAA,IAAI,CAACM,KAAL,GAAW,CAAX;AACAN,QAAAA,IAAI,CAAC9B,KAAL,GAAW,CAAX;AACD,OAJD;AAKAS,MAAAA,QAAQ,CAAC,qBAAD,CAAR;AACAD,MAAAA,MAAM,CAAC,WAAD,EAAcf,YAAd,CAAN;AACD,KA7KM;AA8KPoD,IAAAA,eAAe,EAAC,iCAAc;AAAA,UAAZpC,QAAY,UAAZA,QAAY;AAC5BA,MAAAA,QAAQ,CAAC,WAAD,CAAR;AACAa,MAAAA,YAAY,CAACjB,UAAb,CAAwB,oBAAxB;AACA9B,MAAAA,MAAM,CAACuE,OAAP,CAAe,GAAf;AACD,KAlLM;AAmLPC,IAAAA,iBAAiB,EAAC,mCAAW;AAAA,UAATrE,KAAS,UAATA,KAAS;AAC3B,UAAMsE,UAAU,GAACrB,IAAI,CAACsB,SAAL,CAAevE,KAAK,CAACG,IAArB,CAAjB;AACAyC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6ByB,UAA7B;AACA1B,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqC7C,KAAK,CAACM,YAA3C;AACAsC,MAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgC7C,KAAK,CAACO,OAAtC;AACAqC,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkC7C,KAAK,CAACQ,SAAxC;AACD,KAzLM;AA0LPgE,IAAAA,mBA1LO,iCA0Lc;AACnB5B,MAAAA,YAAY,CAACjB,UAAb,CAAwB,MAAxB;AACAiB,MAAAA,YAAY,CAACjB,UAAb,CAAwB,cAAxB;AACAiB,MAAAA,YAAY,CAACjB,UAAb,CAAwB,SAAxB;AACAiB,MAAAA,YAAY,CAACjB,UAAb,CAAwB,WAAxB;AACAiB,MAAAA,YAAY,CAACjB,UAAb,CAAwB,oBAAxB;AACD;AAhMM;AAzEmB,CAAf,CAAf","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport {storeProducts, detailProduct} from '../data';\nimport axios from 'axios';\nimport router from '../router';\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    products:[],\n    detailedProduct:null,\n    cart:[],\n    modalOpen:false,\n    modalProduct:null,\n    cartSubtotal:0,\n    cartTax:0,\n    cartTotal:0,\n  },\n  getters:{\n    products:(state)=>{\n      return state.products;\n    },\n    detailedProduct:(state)=>{\n      return state.detailedProduct;\n    },\n    modalProduct:(state)=>{\n      return state.modalProduct;\n    },\n    cart:(state)=>{\n      return state.cart;\n    }\n  },\n  mutations: {\n    setProducts:(state, products)=>{\n      state.products=products;\n    },\n    handelDetail:(state, detailedProduct)=>{\n      state.detailedProduct=detailedProduct;\n    },\n    loadCartOnReload:(state, payLoad)=>{\n      state.products=payLoad.tempProducts;\n      state.cart=payLoad.tempCart;\n      state.cartSubtotal=payLoad.cartSubtotal;\n      state.cartTax=payLoad.cartTax;\n      state.cartTotal=payLoad.cartTotal;\n    },\n    addToCart:(state, payLoad)=>{\n      state.products=payLoad.tempProducts;\n      state.cart=[...state.cart, payLoad.product];\n    },\n    addTotal:(state, payLoad)=>{\n      state.cartSubtotal=payLoad.subTotal;\n      state.cartTax=payLoad.tempTax;\n      state.cartTotal=payLoad.total;\n    },\n    openModal:(state, modalProduct)=>{\n      state.modalProduct=modalProduct;\n      state.modalOpen=true;\n    },\n    closeModal:(state)=>{\n      state.modalOpen=false;\n    },\n    increment:(state, cart)=>{\n      state.cart=cart;\n    },\n    decrement:(state, cart)=>{\n      state.cart=cart;\n    },\n    removeItem:(state, payLoad)=>{\n      state.products=payLoad.products;\n      state.cart=payLoad.cart;\n    },\n    clearCart:(state, tempProducts)=>{\n        state.products=tempProducts;\n        state.cartSubtotal=0;\n        state.cartTax=0;\n        state.cartTotal=0;\n        state.cart=[];\n    }\n  },\n  actions: {\n    setProducts:({commit, dispatch})=>{\n      let tempProducts=[];\n      //commit('setProducts', tempProducts);\n      /*\n        storeProducts.forEach(item=>{\n        const tempItem={...item};\n        tempProducts=[...tempProducts, tempItem];\n        });\n        commit('setProducts', tempProducts);\n      */\n      //axios.put('https://e-handy-store.firebaseio.com/storeWatches.json', storeProducts);\n        axios.get('https://e-handy-store.firebaseio.com/storeWatches.json')\n        .then(res=>{\n            tempProducts=res.data;\n            commit('setProducts', tempProducts);\n            console.log('serveradata',tempProducts);\n        }).then(()=>{\n              dispatch('loadDetailOnReload');\n              dispatch('loadCartOnReload');\n        }).catch(err=>console.log(err));\n    },\n    handelDetail:({commit, state}, id)=>{\n      let product=state.products.find(product=>product.id===id);\n      commit('handelDetail', product);\n      let index=state.products.findIndex(product=>product.id===id);\n      localStorage.setItem('detailProductIndex', index);\n    },\n    loadDetailOnReload:({commit, dispatch, state})=>{\n      if(state.detailedProduct!==null){\n        return;\n      }else {\n        const index=localStorage.getItem('detailProductIndex');\n        commit('handelDetail', state.products[index])\n      }\n    },\n    loadCartOnReload:({commit, dispatch, state})=>{\n      let stringToArr=localStorage.getItem('cart');\n      const tempCart=JSON.parse(stringToArr);\n\n      let tempProducts=[];\n      state.products.forEach((item)=>{\n        const singleItem={...item};\n        tempProducts=[...tempProducts, singleItem];\n      });\n      //Because we need to also change the main products list after reloading the cart from local storage or after reloading even though a item will be in the cart but in the main products list showed it will appear as new means with \"inCart=false\" and \"count=0\"\n      for(let i=0; i<tempProducts.length; i++){\n        for(let j=0; j<tempCart.length;j++){\n          if(tempCart[j].id===tempProducts[i].id){\n            tempProducts[i]={...tempCart[j]};\n            break;\n          }\n        }\n      }\n      const cartSubtotal=localStorage.getItem('cartSubtotal');\n      const cartTax=localStorage.getItem('cartTax');\n      const cartTotal=localStorage.getItem('cartTotal');\n\n      commit('loadCartOnReload', {tempProducts, tempCart, cartSubtotal, cartTax, cartTotal});\n    },\n    addToCart:({commit, dispatch, state}, id)=>{\n      let tempProducts=[];\n      state.products.forEach((item)=>{\n        const singleItem={...item};\n        tempProducts=[...tempProducts, singleItem];\n      });\n      let index=tempProducts.findIndex(product=>product.id===id);\n      let product=tempProducts[index];\n\n      product.inCart=true;\n      product.count=1;\n      product.total=product.price;\n\n      //1st way of making Promise\n      let p=new Promise((resolve)=>{\n          resolve( commit('addToCart', {tempProducts:tempProducts, product:product}) );\n      })\n        p.then(()=>{\n          dispatch('addTotal')\n        }).then(()=>{\n          dispatch('saveCartOnBrowser');\n        })\n    },\n    addTotal:({commit, state})=>{\n      let subTotal=0;\n      for(let i=0;i<state.cart.length;i++){\n        subTotal +=state.cart[i].total;\n      }\n\n      let tempTax=subTotal*0.1;\n      tempTax=parseFloat(tempTax.toFixed(2));\n\n      let total=subTotal+tempTax;\n\n      commit('addTotal', {subTotal:subTotal, tempTax:tempTax, total:total})\n    },\n    openModal:({commit, state}, id)=>{\n      const modalProduct=state.products.find(product=>product.id===id);\n      commit('openModal', modalProduct);\n    },\n    closeModal:({commit})=>{\n      commit('closeModal');\n    },\n    increment:({commit, dispatch, state}, id)=>{\n      const tempCart=[...state.cart];\n      const index=tempCart.findIndex(item=>item.id===id);\n      const product=tempCart[index];\n      product.count++;\n      product.total +=product.price;\n\n      return new Promise(resolve=>{\n        resolve(commit('increment', tempCart));\n      }).then(()=>{\n        dispatch('addTotal');\n      }).then(()=>{\n        dispatch('saveCartOnBrowser');\n      })\n    },\n    decrement:({commit, dispatch, state}, id)=>{\n      const tempCart=[...state.cart];\n      const index=tempCart.findIndex(item=>item.id===id);\n      const product=tempCart[index];\n      product.count--;\n      product.total -=product.price;\n\n      if(product.count<=0){\n          dispatch('removeItem', id);\n      }else {\n\n          return new Promise(resolve=>{\n            resolve(commit('decrement', tempCart));\n          }).then(()=>{\n               dispatch('addTotal');\n          }).then(()=>{\n            dispatch('saveCartOnBrowser');\n          })\n      }\n    },\n    removeItem:({commit, dispatch, state}, id)=>{\n      let tempProducts=[];\n      state.products.forEach((item)=>{\n        const singleItem={...item};\n        tempProducts=[...tempProducts, singleItem];\n      });\n      const index=tempProducts.findIndex(item=>item.id===id);\n      const product=tempProducts[index];\n      product.inCart=false;\n      product.count=0;\n      product.total=0;\n\n      let tempCart=state.cart.filter(item=>item.id!==id);\n\n      return new Promise(resolve=>{\n          resolve( commit('removeItem', {products:tempProducts, cart:tempCart}) );\n      }).then(()=>{\n          dispatch('addTotal');\n      }).then(()=>{\n        dispatch('saveCartOnBrowser');\n      })\n    },\n    clearCart:({commit, dispatch, state})=>{\n      let tempProducts=[];\n      state.products.forEach((item)=>{\n        const singleItem={...item};\n        tempProducts=[...tempProducts, singleItem];\n      });\n      tempProducts.map(item=>{\n        item.inCart=false;\n        item.count=0;\n        item.total=0;\n      });\n      dispatch('cleanBrowserStorage');\n      commit('clearCart', tempProducts);\n    },\n    paymentComplete:({dispatch})=>{\n      dispatch('clearCart');\n      localStorage.removeItem('detailProductIndex');\n      router.replace('/');\n    },\n    saveCartOnBrowser:({state})=>{\n      const StringCart=JSON.stringify(state.cart)\n      localStorage.setItem('cart', StringCart);\n      localStorage.setItem('cartSubtotal', state.cartSubtotal);\n      localStorage.setItem('cartTax', state.cartTax);\n      localStorage.setItem('cartTotal', state.cartTotal);\n    },\n    cleanBrowserStorage(){\n      localStorage.removeItem('cart');\n      localStorage.removeItem('cartSubtotal');\n      localStorage.removeItem('cartTax');\n      localStorage.removeItem('cartTotal');\n      localStorage.removeItem('detailProductIndex');\n    }\n  }\n})\n"]}]}
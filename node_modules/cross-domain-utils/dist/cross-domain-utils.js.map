{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fd1496a7ea24bb0daf4d","webpack:///./src/util.js","webpack:///./src/constants.js","webpack:///./src/utils.js","webpack:///./src/index.js","webpack:///./src/types.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","isRegex","item","toString","PROTOCOL","MOCK","FILE","ABOUT","WILDCARD","WINDOW_TYPE","IFRAME","POPUP","IE_WIN_ACCESS_ERROR","isFileProtocol","arguments","length","undefined","window","location","protocol","isAboutProtocol","getParent","win","parent","err","getOpener","opener","canReadFromWindow","href","getActualDomain","Error","host","getDomain","domain","mockDomain","indexOf","isBlankDomain","isActuallySameDomain","desc","getOwnPropertyDescriptor","isSameDomain","assertSameDomain","getParents","result","push","isAncestorParent","child","childParent","getFrames","frames","len","frame","getAllChildFrames","_i3","_getFrames2","_length2","_i5","_getAllChildFrames2","_length4","childFrame","getTop","top","_i7","_getAllChildFrames4","_length6","getNextOpener","getUltimateTop","getAllFramesInWindow","concat","getAllWindows","isTop","isFrameWindowClosed","contentWindow","parentNode","doc","ownerDocument","documentElement","contains","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","mockclosed","iframeIndex","collection","safeIndexOf","linkFrameWindow","splice","cleanIframes","getUserAgent","navigator","mockUserAgent","userAgent","getFrameByName","winFrames","_i9","_length8","findChildFrameByName","_i11","_getFrames4","_length10","namedFrame","findFrameByName","isParent","frameParent","_i13","_getFrames6","_length12","isOpener","getAncestor","getAncestors","results","ancestor","isAncestor","actualParent","_i15","_getFrames8","_length14","isPopup","Boolean","isIframe","isFullpage","anyMatch","collection1","collection2","_i17","_length16","item1","_i19","_length18","getDistanceFromTop","distance","getNthParent","getNthParentFromTop","isSameTopWindow","win1","win2","top1","top2","allFrames1","allFrames2","opener1","opener2","matchDomain","pattern","origin","Array","isArray","match","JSON","stringify","some","subpattern","stringifyDomainPattern","join","getDomainFromUrl","url","split","slice","onCloseWindow","callback","delay","maxtime","Infinity","timeout","check","clearTimeout","setTimeout","cancel","isWindow","obj","Window","__cross_domain_utils_window_check__","isBrowser","isCurrentDomain","isMockDomain","normalizeMockUrl","closeWindow","close","__webpack_exports__"],"mappings":"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","file":"cross-domain-utils.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"crossDomainUtils\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"crossDomainUtils\"] = factory();\n\telse\n\t\troot[\"crossDomainUtils\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fd1496a7ea24bb0daf4d","/* @flow */\n\nexport function isRegex(item : mixed) : boolean {\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : Array<mixed>) {\n    // pass\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/* @flow */\n\nexport const PROTOCOL = {\n    MOCK:  ('mock:' : 'mock:'),\n    FILE:  ('file:' : 'file:'),\n    ABOUT: ('about:' : 'about:')\n};\n\nexport const WILDCARD = '*';\n\nexport const WINDOW_TYPE = {\n    IFRAME: ('iframe' : 'iframe'),\n    POPUP:  ('popup' : 'popup')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","/* @flow */\n/* eslint max-lines: 0 */\n\nimport { isRegex, noop } from './util';\nimport type { CrossDomainWindowType, SameDomainWindowType, DomainMatcher } from './types';\nimport { PROTOCOL, WILDCARD } from './constants';\n\nlet IE_WIN_ACCESS_ERROR = 'Call was rejected by callee.\\r\\n';\n\nexport function isFileProtocol(win : SameDomainWindowType = window) : boolean {\n    return win.location.protocol === PROTOCOL.FILE;\n}\n\nexport function isAboutProtocol(win : SameDomainWindowType = window) : boolean {\n    return win.location.protocol === PROTOCOL.ABOUT;\n}\n\nexport function getParent(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function getOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    // Make sure we're not actually an iframe which has had window.open() called on us\n    if (getParent(win)) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function canReadFromWindow(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        noop(win && win.location && win.location.href);\n        return true;\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function getActualDomain(win : ?SameDomainWindowType) : string {\n\n    win = win || window;\n\n    let location = win.location;\n\n    if (!location) {\n        throw new Error(`Can not read window location`);\n    }\n\n    let protocol = location.protocol;\n\n    if (!protocol) {\n        throw new Error(`Can not read window protocol`);\n    }\n\n    if (protocol === PROTOCOL.FILE) {\n        return `${ PROTOCOL.FILE }//`;\n    }\n\n    if (protocol === PROTOCOL.ABOUT) {\n\n        let parent = getParent(win);\n        if (parent && canReadFromWindow(parent)) {\n            // $FlowFixMe\n            return getActualDomain(parent);\n        }\n\n        return `${ PROTOCOL.ABOUT }//`;\n    }\n\n    let host = location.host;\n\n    if (!host) {\n        throw new Error(`Can not read window host`);\n    }\n\n    return `${ protocol }//${ host }`;\n}\n\nexport function getDomain(win : ?SameDomainWindowType) : string {\n\n    win = win || window;\n\n    let domain = getActualDomain(win);\n\n    if (domain && win.mockDomain && win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n        return win.mockDomain;\n    }\n\n    return domain;\n}\n\nexport function isBlankDomain(win : CrossDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        if (!win.location.href) {\n            return true;\n        }\n\n        if (win.location.href === 'about:blank') {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isActuallySameDomain(win : CrossDomainWindowType) : boolean {\n\n    try {\n        if (win === window) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        let desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n        if (desc && desc.enumerable === false) {\n            return false;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (getActualDomain(win) === getActualDomain(window)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n\n    if (!isActuallySameDomain(win)) {\n        return false;\n    }\n\n    try {\n\n        if (win === window) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (getDomain(window) === getDomain(win)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\n\nexport function assertSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : SameDomainWindowType {\n    if (!isSameDomain(win)) {\n        throw new Error(`Expected window to be same domain`);\n    }\n\n    // $FlowFixMe\n    return win;\n}\n\nexport function getParents(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nexport function isAncestorParent(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    let childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getFrames(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let result = [];\n\n    let frames;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    let len;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (let i = 0; i < len; i++) {\n\n            let frame;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < 100; i++) {\n        let frame;\n\n        try {\n            frame = frames[i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!frame) {\n            return result;\n        }\n\n        result.push(frame);\n    }\n\n    return result;\n}\n\n\nexport function getAllChildFrames(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let result = [];\n\n    for (let frame of getFrames(win)) {\n        result.push(frame);\n\n        for (let childFrame of getAllChildFrames(frame)) {\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nexport function getTop(win : CrossDomainWindowType) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (let frame of getAllChildFrames(win)) {\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\nexport function getNextOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    return getOpener(getTop(win) || win);\n}\n\nexport function getUltimateTop(win? : CrossDomainWindowType = window) : CrossDomainWindowType {\n    let opener = getNextOpener(win);\n\n    if (opener) {\n        return getUltimateTop(opener);\n    }\n\n    return top;\n}\n\nexport function getAllFramesInWindow(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n    let top = getTop(win);\n\n    if (!top) {\n        throw new Error(`Can not determine top window`);\n    }\n\n    return [ ...getAllChildFrames(top), top ];\n}\n\nexport function getAllWindows(win? : CrossDomainWindowType = window) : $ReadOnlyArray<CrossDomainWindowType> {\n    let frames = getAllFramesInWindow(win);\n    let opener = getNextOpener(win);\n\n    if (opener) {\n        return [ ...getAllWindows(opener), ...frames ];\n    } else {\n        return frames;\n    }\n}\n\nexport function isTop(win : CrossDomainWindowType) : boolean {\n    return win === getTop(win);\n}\n\nexport function isFrameWindowClosed(frame : HTMLIFrameElement) : boolean {\n\n    if (!frame.contentWindow) {\n        return true;\n    }\n\n    if (!frame.parentNode) {\n        return true;\n    }\n\n    let doc = frame.ownerDocument;\n\n    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction safeIndexOf<T>(collection : Array<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\nlet iframeWindows = [];\nlet iframeFrames = [];\n\nexport function isWindowClosed(win : CrossDomainWindowType, allowMock : boolean = true) : boolean {\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (!win) {\n            return true;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    if (allowMock && isSameDomain(win)) {\n        try {\n            // $FlowFixMe\n            if (win.mockclosed) {\n                return true;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    // Mobile safari\n\n    try {\n        if (!win.parent || !win.top) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    // Yes, this actually happens in IE. win === win errors out when the window\n    // is from an iframe, and the iframe was removed from the page.\n\n    try {\n        noop(win === win); // eslint-disable-line no-self-compare\n    } catch (err) {\n        return true;\n    }\n\n    // IE orphaned frame\n\n    let iframeIndex = safeIndexOf(iframeWindows, win);\n\n    if (iframeIndex !== -1) {\n        let frame = iframeFrames[iframeIndex];\n\n        if (frame && isFrameWindowClosed(frame)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction cleanIframes() {\n    for (let i = 0; i < iframeWindows.length; i++) {\n        let closed = false;\n\n        try {\n            closed = iframeWindows[i].closed;\n        } catch (err) {\n            // pass\n        }\n\n        if (closed) {\n            iframeFrames.splice(i, 1);\n            iframeWindows.splice(i, 1);\n        }\n    }\n}\n\nexport function linkFrameWindow(frame : HTMLIFrameElement) {\n\n    cleanIframes();\n\n    if (frame && frame.contentWindow) {\n        try {\n            iframeWindows.push(frame.contentWindow);\n            iframeFrames.push(frame);\n        } catch (err) {\n            // pass\n        }\n    }\n}\n\nexport function getUserAgent(win : ?SameDomainWindowType) : string {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\n\nexport function getFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    let winFrames = getFrames(win);\n\n    for (let childFrame of winFrames) {\n        try {\n            // $FlowFixMe\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        // $FlowFixMe\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            // $FlowFixMe\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function findChildFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    let frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        let namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nexport function findFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    let frame;\n\n    frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    let top = getTop(win) || win;\n\n    return findChildFrameByName(top, name);\n}\n\nexport function isParent(win : CrossDomainWindowType, frame : CrossDomainWindowType) : boolean {\n\n    let frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isOpener(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    return parent === getOpener(child);\n}\n\nexport function getAncestor(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    win = win || window;\n\n    let opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    let parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nexport function getAncestors(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let results = [];\n\n    let ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\n\nexport function isAncestor(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    let actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (let frame of getFrames(parent)) {\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isPopup() : boolean {\n    return Boolean(getOpener(window));\n}\n\nexport function isIframe() : boolean {\n    return Boolean(getParent(window));\n}\n\nexport function isFullpage() : boolean {\n    return Boolean(!isIframe() && !isPopup());\n}\n\nfunction anyMatch(collection1, collection2) : boolean {\n\n    for (let item1 of collection1) {\n        for (let item2 of collection2) {\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nexport function getDistanceFromTop(win : CrossDomainWindowType = window) : number {\n    let distance = 0;\n    let parent = win;\n\n    while (parent) {\n        parent = getParent(parent);\n        if (parent) {\n            distance += 1;\n        }\n    }\n\n    return distance;\n}\n\nexport function getNthParent(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    let parent = win;\n\n    for (let i = 0; i < n; i++) {\n        if (!parent) {\n            return;\n        }\n\n        parent = getParent(parent);\n    }\n\n    return parent;\n}\n\nexport function getNthParentFromTop(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nexport function isSameTopWindow(win1 : CrossDomainWindowType, win2 : CrossDomainWindowType) : boolean {\n\n    let top1 = getTop(win1) || win1;\n    let top2 = getTop(win2) || win2;\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    let allFrames1 = getAllFramesInWindow(win1);\n    let allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    let opener1 = getOpener(top1);\n    let opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n\n    return false;\n}\n\nexport function matchDomain(pattern : DomainMatcher, origin : DomainMatcher) : boolean {\n\n    if (typeof pattern === 'string') {\n\n        if (typeof origin === 'string') {\n            return pattern === WILDCARD || origin === pattern;\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n    }\n\n    if (isRegex(pattern)) {\n\n        if (isRegex(origin)) {\n            return pattern.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        // $FlowFixMe\n        return Boolean(origin.match(pattern));\n    }\n\n    if (Array.isArray(pattern)) {\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(pattern) === JSON.stringify(origin);\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        return pattern.some(subpattern => matchDomain(subpattern, origin));\n    }\n\n    return false;\n}\n\nexport function stringifyDomainPattern(pattern : DomainMatcher) : string {\n    if (Array.isArray(pattern)) {\n        return `(${ pattern.join(' | ') })`;\n    } else if (isRegex(pattern)) {\n        return `RegExp(${ pattern.toString() }`;\n    } else {\n        return pattern.toString();\n    }\n}\n\nexport function getDomainFromUrl(url : string) : string {\n\n    let domain;\n\n    if (url.match(/^(https?|mock|file):\\/\\//)) {\n        domain = url;\n    } else {\n        return getDomain();\n    }\n\n    domain = domain.split('/').slice(0, 3).join('/');\n\n    return domain;\n}\n\nexport function onCloseWindow(win : CrossDomainWindowType, callback : Function, delay : number = 1000, maxtime : number = Infinity) : { cancel : () => void } {\n\n    let timeout;\n\n    let check = () => {\n\n        if (isWindowClosed(win)) {\n\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n\n            return callback();\n        }\n\n        if (maxtime <= 0) {\n            clearTimeout(timeout);\n        } else {\n            maxtime -= delay;\n            timeout = setTimeout(check, delay);\n        }\n    };\n\n    check();\n\n    return {\n        cancel() {\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n        }\n    };\n}\n\n// eslint-disable-next-line complexity\nexport function isWindow(obj : Object) : boolean {\n\n    try {\n        if (obj === window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (Object.prototype.toString.call(obj) === '[object Window]') {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (window.Window && obj instanceof window.Window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.self === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.parent === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.top === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (noop(obj === obj) === '__unlikely_value__') { // eslint-disable-line no-self-compare\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (obj && obj.__cross_domain_utils_window_check__ === '__unlikely_value__') {\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function isBrowser() : boolean {\n    return (typeof window !== 'undefined' && typeof window.location !== 'undefined');\n}\n\nexport function isCurrentDomain(domain : string) : boolean {\n    if (!isBrowser()) {\n        return false;\n    }\n\n    return (getDomain() === domain);\n}\n\nexport function isMockDomain(domain : string) : boolean {\n    return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\n\nexport function normalizeMockUrl(url : string) : string {\n    if (!isMockDomain(getDomainFromUrl(url))) {\n        return url;\n    }\n\n    if (!__TEST__) {\n        throw new Error(`Mock urls not supported out of test mode`);\n    }\n\n    return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\n\nexport function closeWindow(win : CrossDomainWindowType) {\n    try {\n        win.close();\n    } catch (err) {\n        // pass\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/* @flow */\n\nexport * from './utils';\nexport * from './types';\nexport * from './constants';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/* @flow */\n\n// export something to force webpack to see this as an ES module\nexport const TYPES = true;\n\nexport type CrossDomainLocationType = {|\n\n|};\n\nexport type CrossDomainWindowType = {|\n    location : string | CrossDomainLocationType,\n    self : CrossDomainWindowType,\n    closed : boolean,\n    open : (string, string, string) => CrossDomainWindowType,\n    close : () => void,\n    focus : () => void,\n    top : CrossDomainWindowType,\n    frames : Array<CrossDomainWindowType>,\n    opener ? : CrossDomainWindowType,\n    parent : CrossDomainWindowType,\n    length : number,\n    postMessage : (string, string) => void\n|};\n\nexport type SameDomainWindowType = Object & {\n    location : string | Object,\n    self : CrossDomainWindowType,\n    closed : boolean,\n    open : (string, string, string) => CrossDomainWindowType,\n    close : () => void,\n    focus : () => void,\n    XMLHttpRequest : typeof XMLHttpRequest,\n    document : Document,\n    navigator : {\n        userAgent : string,\n        mockUserAgent? : string\n    }\n};\n\nexport type DomainMatcher = string | Array<string> | $ReadOnlyArray<string> | RegExp;\n\n\n\n// WEBPACK FOOTER //\n// ./src/types.js"],"sourceRoot":""}